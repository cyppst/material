if (self.CavalryLogger) { CavalryLogger.start_js(["9c0Xf"]); }

__d("CameraEventGroupPostOwnerInfo.react",["cx","fbt","CameraPostAppAttribution.react","ProfileLink.react","React","formatDate","Timestamp.react"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){var c=a.bucketOwnerName,d=a.threadOwnerName,e=a.time,f=a.bucketOwnerId,g=a.threadOwnerId,i=a.threadID,j=a.originalPostStoryAttribution,k=b("React").createElement(b("Timestamp.react"),{autoUpdate:!0,time:e,text:b("formatDate")(e,"M j, Y",{utc:!0})}),l=h._("by {story_poster}",[h._param("story_poster",d)]);l=g?b("React").createElement(b("ProfileLink.react"),{className:"_o-l",uid:g,target:"_blank"},l):l;a=function(){return j?b("React").createElement("div",{className:"_v5o"},k," \u2022 ",l,"\xa0\u2022\xa0",b("React").createElement(b("CameraPostAppAttribution.react"),{currentThreadID:i,postStoryAttribution:j})):b("React").createElement("div",{className:"_v5o"},k," \u2022 ",l)};return b("React").createElement("div",{className:"_60x1"},b("React").createElement("div",null,b("React").createElement(b("ProfileLink.react"),{uid:f,target:"_blank",className:"_v5n"},c)),a())};e.exports=a}),null);
__d("CameraEventGroupPostOwnerPic.react",["cx","CameraPostTypes","ProfileLink.react","React","idx","Image.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){var c=a.bucketProfilePicture,d=a.threadProfilePicture,e=a.cameraPostType,f=a.bucketOwnerId;a=a.threadOwnerId;if(!d)return null;c=(c=c)!=null?c.uri:c;var g=null;c?g=b("React").createElement(b("Image.react"),{src:c,className:"_1___"}):g=b("React").createElement("div",{className:(e===b("CameraPostTypes").EVENT_STORY?"_24ex":"")+(e===b("CameraPostTypes").GROUP_STORY?" _64ag":"")+" _1___"});c=b("React").createElement(b("Image.react"),{src:d.uri,className:"_24ey"});return b("React").createElement("span",null,b("React").createElement(b("ProfileLink.react"),{uid:f,target:"_blank"},g),a?b("React").createElement(b("ProfileLink.react"),{uid:a,target:"_blank"},c):{img:c})};e.exports=a}),null);
__d("ColorUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new RegExp("^[#]{0,1}([\\w]{1,2})?([\\w]{1,2})([\\w]{1,2})([\\w]{1,2})$");a={hexARGBToCSSRGBA:function(a){a=a.match(g);if(a==null)return null;a=a.slice(1).map(function(a){return parseInt(a.length==1?a+a:a,16)});return a.length==4?"rgba("+a[1]+","+a[2]+","+a[3]+","+a[0]+")":"rgb("+a[0]+","+a[1]+","+a[2]+")"},hexRGBAToCSSRGBA:function(a){a=a.match(g);if(a==null)return null;a=a.slice(1).map(function(a){return parseInt(a.length==1?a+a:a,16)});return a.length==4?"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")":"rgb("+a[0]+","+a[1]+","+a[2]+")"}};e.exports=a}),null);
__d("CameraPostDefaultBackground.react",["cx","React","idx","ColorUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.componentDidMount=function(){var a,c,d;a=(a=this.props.data)!=null?(a=a.portrait_image)!=null?a.uri:a:a;c=(c=this.props.data)!=null?(c=c.gradient)!=null?c.css:c:c;d=(d=this.props.data)!=null?d.color:d;d=d?b("ColorUtils").hexARGBToCSSRGBA(d):"";this.$1&&(d&&(this.$1.style.backgroundColor=d),a?this.$1.style.backgroundImage="url('"+a+"')":c&&(this.$1.style.backgroundImage=c))};a.prototype.render=function(){return b("React").createElement("div",{className:"_1ugq",ref:function(a){return this.$1=a}.bind(this)})};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("CameraPostDeletedToast.react",["ix","cx","fbt","Image.react","React","XUIText.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";a=function(a){a=a.visible;var c=b("React").createElement(b("Image.react"),{src:g("491198")});return!a?b("React").createElement("div",{style:{display:"none"}},c):b("React").createElement("div",{className:"_618_"},b("React").createElement("div",{className:"_j71"},c),b("React").createElement(b("XUIText.react"),{className:"_4b4i"},i._("Deleted")))};e.exports=a}),null);
__d("CameraPostPlainTextComponent.react",["cx","React","TextWithEmoticons.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=30,j=24,k=80;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={lineHeight:i},b}a.prototype.componentDidMount=function(){requestAnimationFrame(function(){this.$1&&this.$1.offsetHeight<this.$1.scrollHeight&&this.setState({lineHeight:j})}.bind(this))};a.prototype.render=function(){return b("React").createElement("div",{className:this.props.className},b("React").createElement("div",{className:"_4tbz"},b("React").createElement("div",{className:"_4tcq"+(this.props.messageText.length>k?" _67g-":"")},b("React").createElement("div",{className:"_66tq"+(this.state.lineHeight===j?" _259r":""),ref:function(a){return this.$1=a}.bind(this)},b("React").createElement(b("TextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:this.props.messageText,size:this.state.lineHeight})))))};e.exports=a}),null);
__d("CameraPostLinkComponent.react",["cx","BackgroundImage.react","CameraPostPlainTextComponent.react","ColorUtils","React","TextWithEmoticons.react","VideoComponentWithLoopingPlayback.react","VideoDataContainer.react","VideoPlayer.react","XUISpinner.react","idx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=9/16,j=80,k=20;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$3=function(){this.$2||(this.props.onFirstMediaLoaded(),this.$2=!0)}.bind(this),b}a.prototype.componentDidMount=function(){__p&&__p();var a;a=(a=this.props.mediaBackgroundInfo)!=null?a.color_info:a;if(a&&a.length>0){a=a[0];a=(a=a)!=null?a.caption_font_color:a;if(a){a=b("ColorUtils").hexRGBAToCSSRGBA(a);this.$1&&a&&(this.$1.style.color=a)}}};a.prototype.render=function(){__p&&__p();var a;a=!this.props.paused&&((a=this.props.linkAttachment)!=null?(a=a.animated_media)!=null?a.id:a:a);var c=null;if(a){var d;d=(d=this.props.linkAttachment)!=null?(d=d.animated_media)!=null?d.is_looping:d:d;c=b("React").createElement(b("VideoDataContainer.react"),{videoID:a,renderLoading:function(){return b("React").createElement(b("XUISpinner.react"),{background:"dark",className:"_2out",size:"large"})}},b("React").createElement(b("VideoPlayer.react"),{className:"_34jp",autoplay:!0,videoData:b("VideoDataContainer.react").VIDEO_DATA_PLACEHOLDER,onUpdateMetadata:this.$3},b("React").createElement(b("React").Fragment,null),b("React").createElement(b("VideoComponentWithLoopingPlayback.react"),{infiniteLooping:d})))}else{a=!this.props.paused&&((a=this.props.linkAttachment)!=null?(a=a.animated_media)!=null?(a=a.animated_image)!=null?a.uri:a:a:a)||((d=this.props.linkAttachment)!=null?(d=d.media)!=null?(d=d.image)!=null?d.uri:d:d:d);a&&(c=b("React").createElement(b("BackgroundImage.react"),{optimizeResizeSpeed:!0,backgroundSize:"cover",width:this.props.width,height:this.props.width*i,src:a,onImageLoad:this.$3}))}if(c)return b("React").createElement("div",{className:"_69zq"+(this.props.messageText?" _69zr":"")+" _1s5n"},b("React").createElement("div",{className:"_69zs"+(this.props.messageText.length<=j?" _1s68":""),ref:function(a){return this.$1=a}.bind(this)},b("React").createElement(b("TextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:this.props.messageText,size:k})),b("React").createElement("div",{className:"_69zt"},c));else if(this.props.messageText.length>0){this.$3();return b("React").createElement(b("CameraPostPlainTextComponent.react"),{className:"_1s5n",messageText:this.props.messageText})}return null};e.exports=a}),null);
__d("BlurredBackgroundImage.react",["cx","BackgroundImage.react","React","UserAgent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){if(b("UserAgent").isBrowser("IE")&&this.props.fallbackSrc)return b("React").createElement(b("BackgroundImage.react"),{src:this.props.fallbackSrc,optimizeResizeSpeed:!0,backgroundSize:"cover",width:this.props.width,height:this.props.height,backgroundFocus:"50% 50%",loadingIndicatorStyle:"none",className:"_4kpl fallback"});return this.props.src?b("React").createElement(b("BackgroundImage.react"),{src:this.props.src,optimizeResizeSpeed:!0,backgroundSize:"cover",width:this.props.width,height:this.props.height,backgroundFocus:"50% 50%",loadingIndicatorStyle:"none",className:"_4kpl"}):null};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("CameraPostMediaGradientBackground.react",["cx","React","idx","ColorUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){__p&&__p();var a;a=(a=this.props.data)!=null?a.color_info:a;if(a&&a.length>0){var c;a=a[0];c=(c=a)!=null?c.top_color:c;a=(a=a)!=null?a.bottom_color:a;if(c&&a){c=b("ColorUtils").hexRGBAToCSSRGBA(c);a=b("ColorUtils").hexRGBAToCSSRGBA(a);if(c&&a){c="linear-gradient("+c+","+a+")";return b("React").createElement("div",{className:"_1ugq",style:{background:c}})}}}return null};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesActivityDescription.react",["cx","Image.react","Link.react","React","TextWithEntities.react","Tooltip.react","ShimButton.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(a,c){__p&&__p();if(c.entity&&c.entity.url!==undefined&&c.entity.url!==null)return b("React").createElement(b("Link.react"),{onClick:this.props.onLinkClick,onMouseUp:function(a){return a.stopPropagation()},className:"_1b6i",href:c.entity,target:"_blank"},a);else if(c.entity&&c.entity.url===undefined)return b("React").createElement(b("Link.react"),{onMouseUp:function(a){return a.stopPropagation()},className:"_1b6i",href:c.entity,target:"_blank"},a);else if(c.entity_with_image)return b("React").createElement(b("Image.react"),{className:"_1b6j",src:c.entity_with_image.image.uri,width:c.entity_with_image.image.width/c.entity_with_image.image.scale,height:c.entity_with_image.image.height/c.entity_with_image.image.scale});else if(c.all_entities){c=c.all_entities.edges.map(function(a){return b("React").createElement("div",{key:a.node.id},a.node.name)});return b("React").createElement(b("Tooltip.react"),{tooltip:b("React").createElement("div",null,c)},b("React").createElement(b("ShimButton.react"),{className:"_1b6i",form:"link",onClick:this.props.openWithSidePanel,onMouseUp:function(a){return a.stopPropagation()}},a))}else return a}.bind(this),c}a.prototype.render=function(){return!this.props.activityDescription?null:b("React").createElement("div",{className:b("joinClasses")("_1b6l",this.props.className)},b("React").createElement("span",{className:"_1b6p"},"\u2014"),this.props.activityDescription&&b("React").createElement(b("TextWithEntities.react"),{imageRanges:this.props.activityDescription.image_ranges,ranges:this.props.activityDescription.ranges,aggregatedRanges:this.props.activityDescription.aggregated_ranges,text:this.props.activityDescription.text,interpolator:this.$1}))};e.exports=a}),null);
__d("StoryFooterMetadataFromComposerType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MINUTIAE_ONLY:"minutiae_only",LOCATION_ONLY:"location_only",TAGGING_ONLY:"tagging_only",COMPLEX_SOCIAL_SENTENCE:"complex_social_sentence",NONE:"none"})}),null);
__d("FBStoryMetadataUtils",["StoryFooterMetadataFromComposerType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={isMetadataOnly:function(a,b,c,d,e,f){return!e&&!d&&!(f&&f.url)&&this.hasMetadata(a,b,c)},hasMetadata:function(a,b,c){return this.locationExists(a)||this.minutiaeExists(b)||this.withTagsExists(c)},minutiaeExists:function(a){return!!(a&&a.edges&&a.edges.length>0)},withTagsExists:function(a){return!!(a&&a.edges&&a.edges.length>0)},locationExists:function(a){return!!(a&&a.contextual_name)},getStoryFooterMetadataType:function(a,c,d,e){__p&&__p();d=this.minutiaeExists(d);e=this.withTagsExists(e);c=this.locationExists(c);if(a&&(e&&c||c&&d||e&&d))return b("StoryFooterMetadataFromComposerType").COMPLEX_SOCIAL_SENTENCE;if(c)return b("StoryFooterMetadataFromComposerType").LOCATION_ONLY;if(e)return b("StoryFooterMetadataFromComposerType").TAGGING_ONLY;return d?b("StoryFooterMetadataFromComposerType").MINUTIAE_ONLY:b("StoryFooterMetadataFromComposerType").NONE}};e.exports=a}),null);
__d("FBStoryMinutiaeImageRenderer.react",["cx","Link.react","Image.react","React","FBStoryMetadataUtils","idx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){__p&&__p();var c,d=a.inlineActivities,e=a.largeProfilePhoto;if(!b("FBStoryMetadataUtils").minutiaeExists(d))return null;c=(c=d)!=null?(c=c.edges)!=null?(c=c[0])!=null?(c=c.node)!=null?(c=c.taggable_activity_icon)!=null?(c=c.image)!=null?c.uri:c:c:c:c:c:c;var f=void 0;if(e){var g;f=(g=d)!=null?(g=g.edges)!=null?(g=g[0])!=null?(g=g.node)!=null?(g=g.attachment_object)!=null?(g=g.profile_photo)!=null?(g=g.large_image)!=null?g.uri:g:g:g:g:g:g:g}else{f=(g=d)!=null?(g=g.edges)!=null?(g=g[0])!=null?(g=g.node)!=null?(g=g.attachment_object)!=null?(g=g.profile_photo)!=null?(g=g.image)!=null?g.uri:g:g:g:g:g:g:g}d=(g=d)!=null?(g=g.edges)!=null?(g=g[0])!=null?(g=g.node)!=null?(g=g.attachment_object)!=null?g.url:g:g:g:g:g;g=null;f?g=f:c&&(g=c);if(!g)return null;c=b("React").createElement(b("Image.react"),{className:"_2pzb"+(f?" _2pzj":""),height:e&&f?288:56,src:g,width:e&&f?288:56});d&&(c=b("React").createElement(b("Link.react"),{href:d,target:"_blank",onClick:a.onLinkClick,onMouseUp:function(a){return a.stopPropagation()}},c));return c}e.exports=a}),null);
__d("CameraPostMinutiaeComponent.react",["cx","FBStoriesActivityDescription.react","FBStoryMinutiaeImageRenderer.react","Link.react","React","FBStoryMetadataUtils","StoryFooterMetadataFromComposerType","idx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.$1=function(){__p&&__p();var a,c=b("FBStoryMetadataUtils").getStoryFooterMetadataType(this.props.storyMetadata.activityDescription,this.props.storyMetadata.explicitLocation,this.props.storyMetadata.inlineActivities,this.props.storyMetadata.withTags);if(c===b("StoryFooterMetadataFromComposerType").MINUTIAE_ONLY)return b("React").createElement(b("FBStoriesActivityDescription.react"),{onLinkClick:this.props.onLinkClick,activityDescription:this.props.storyMetadata.activityDescription,openWithSidePanel:this.props.openWithSidePanel,className:"_3bkz _13da _13dc"});c=this.props.storyMetadata.inlineActivities&&this.props.storyMetadata.inlineActivities.edges&&this.props.storyMetadata.inlineActivities.edges.length>0?this.props.storyMetadata.inlineActivities.edges[0]:null;a=((a=c)!=null?(a=a.node)!=null?(a=a.attachment_object)!=null?a.name:a:a:a)||((a=c)!=null?(a=a.node)!=null?(a=a.object)!=null?a.name:a:a:a);c=(c=c)!=null?(c=c.node)!=null?(c=c.attachment_object)!=null?c.url:c:c:c;if(a){a=b("React").createElement("div",{className:"_3bkz _13da _13dc"},a);c&&(a=b("React").createElement(b("Link.react"),{className:"_1b6i",href:c,target:"_blank",onClick:this.props.onLinkClick},a));return a}return null};a.prototype.render=function(){return b("React").createElement("div",{className:"_32v7"},b("React").createElement("div",{className:"_32v8"},b("React").createElement(b("FBStoryMinutiaeImageRenderer.react"),{inlineActivities:this.props.storyMetadata.inlineActivities,largeProfilePhoto:!0,onLinkClick:this.props.onLinkClick}),this.$1()))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("CameraPostMuteButton.react",["ix","cx","AbstractButton.react","Event","Image.react","Keys","React","fbglyph"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$2=function(a){a.preventDefault(),a.stopPropagation(),this.props.onMouseUp()}.bind(this),this.$3=function(a){a=b("Event").getKeyCode(a);switch(a){case b("Keys").SPACE:case b("Keys").RETURN:this.props.onMouseUp()}}.bind(this),c}a.prototype.$1=function(a){a.preventDefault(),a.stopPropagation()};a.prototype.render=function(){var a=g("115742"),c=g("115739");return b("React").createElement(b("AbstractButton.react"),{className:"_tqj",tabIndex:"0",onKeyUp:this.$3,onMouseDown:this.$1,onMouseUp:this.$2,image:b("React").createElement(b("Image.react"),{src:this.props.muted?a:c}),labelIsHidden:!0,label:this.props.muted?"Muted":"Unmuted"})};e.exports=a}),null);
__d("CameraPostSATPBackground.react",["cx","React","idx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.componentDidMount=function(){var a,b;a=(a=this.props.satpData)!=null?(a=a.textFormatMetadata)!=null?(a=a.portrait_background_image)!=null?a.uri:a:a:a;b=(b=this.props.satpData)!=null?(b=b.wwwTextFormatMetadata)!=null?b.body_style:b:b;this.$1&&(a?this.$1.style.backgroundImage="url('"+a+"')":this.$1.setAttribute("style",b||""))};a.prototype.render=function(){return b("React").createElement("div",{className:"_1ugq",ref:function(a){return this.$1=a}.bind(this)})};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("CameraPostSATPComponent.react",["cssVar","cx","React","TextWithEmoticons.react","idx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.componentDidMount=function(){var a;a=(a=this.props.satpData)!=null?(a=a.wwwTextFormatMetadata)!=null?a.text_input_style:a:a;this.$1&&this.$1.setAttribute("style",a||"");a="24px";var b="100px 20px";this.$1&&(this.$1.style.fontSize=a,this.$1.style.padding=b)};a.prototype.render=function(){return b("React").createElement("div",{className:this.props.className},b("React").createElement("div",{className:"_zre"},b("React").createElement("div",{className:"_zrg",ref:function(a){return this.$1=a}.bind(this)},b("React").createElement(b("TextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:this.props.satpData.rootMessageText,size:30}))))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("CameraPostWithTagsComponent.react",["cx","FBStoriesActivityDescription.react","FBStoryMetadataUtils","React","SplitImage.react","StoryFooterMetadataFromComposerType","idx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.$1=function(){var a=b("FBStoryMetadataUtils").getStoryFooterMetadataType(this.props.storyMetadata.activityDescription,this.props.storyMetadata.explicitLocation,this.props.storyMetadata.inlineActivities,this.props.storyMetadata.withTags);return a===b("StoryFooterMetadataFromComposerType").TAGGING_ONLY?b("React").createElement(b("FBStoriesActivityDescription.react"),{onLinkClick:this.props.onLinkClick,activityDescription:this.props.storyMetadata.activityDescription,openWithSidePanel:this.props.openWithSidePanel,className:"_3bkz _13da _13dc"}):null};a.prototype.render=function(){var a;a=(a=this.props)!=null?(a=a.storyMetadata)!=null?(a=a.withTags)!=null?a.edges:a:a:a;a=a?a.map(function(a){return(a=a)!=null?(a=a.node)!=null?(a=a.large_profile_picture)!=null?a.uri:a:a:a}).filter(Boolean):[];return b("React").createElement("div",{className:"_33ba"},b("React").createElement("div",{className:"_33bb"},b("React").createElement(b("SplitImage.react"),{className:"_2bmp",srcs:a,size:256,border:!0}),this.$1()))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesLocationSecondaryText.react",["ix","cx","Image.react","React","TooltipData","asset"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=["CITY_WITH_ID","CITY"];i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){if(!this.props.explicitLocation)return null;var a=this.props.explicitLocation.category_type,c=this.props.explicitLocation.category_name,d=this.props.explicitLocation.city?this.props.explicitLocation.city.name:null,e=null;c&&d&&j.indexOf(a)===-1?e=c+" - "+d:c?e=c:d&&(e=d);return e?b("React").createElement("div",babelHelpers["extends"]({className:"_4m14 _3frm","data-tooltip-display":"overflow"},b("TooltipData").propsFor(e,"above")),b("React").createElement(b("Image.react"),{className:"_4m15",src:g("492194")}),e):null};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesLocationComponent.react",["cx","FBStoryMetadataUtils","FBStoriesActivityDescription.react","FBStoriesLocationSecondaryText.react","GeoCoordinates","GeoMarker","Link.react","React","StaticGeoMapDesktopWeb.react","StaticGeoMapSource","StoryFooterMetadataFromComposerType","idx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=13,j="288px",k="288px";h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.$1=function(){var a,c,d;a=(a=this.props.storyMetadata)!=null?(a=a.explicitLocation)!=null?(a=a.location)!=null?a.latitude:a:a:a;c=(c=this.props.storyMetadata)!=null?(c=c.explicitLocation)!=null?(c=c.location)!=null?c.longitude:c:c:c;d=(d=this.props.storyMetadata)!=null?(d=d.explicitLocation)!=null?d.url:d:d;a=c&&a?b("React").createElement(b("StaticGeoMapDesktopWeb.react"),{width:j,height:k,markers:[new(b("GeoMarker"))(new(b("GeoCoordinates"))(a,c))],source:b("StaticGeoMapSource").FBSTORIES_COMPOSER_CHECKIN,center:new(b("GeoCoordinates"))(a,c),showReportButton:!1,zoom:i}):null;a&&d&&(a=b("React").createElement(b("Link.react"),{href:d,target:"_blank",onClick:this.props.onLinkClick,className:"_14q2"},a));return a};a.prototype.$2=function(){__p&&__p();var a,c=b("FBStoryMetadataUtils").getStoryFooterMetadataType(this.props.storyMetadata.activityDescription,this.props.storyMetadata.explicitLocation,this.props.storyMetadata.inlineActivities,this.props.storyMetadata.withTags);if(c===b("StoryFooterMetadataFromComposerType").LOCATION_ONLY)return b("React").createElement(b("FBStoriesActivityDescription.react"),{onLinkClick:this.props.onLinkClick,activityDescription:this.props.storyMetadata.activityDescription,openWithSidePanel:this.props.openWithSidePanel,className:"_3bkz _13da _13dc"});c=(c=this.props.storyMetadata)!=null?(c=c.explicitLocation)!=null?c.url:c:c;a=(a=this.props.storyMetadata)!=null?(a=a.explicitLocation)!=null?a.contextual_name:a:a;if(a){a=b("React").createElement("div",{className:"_3bkz _13da _13dc"},a);c&&(a=b("React").createElement(b("Link.react"),{className:"_1b6i",href:c,target:"_blank",onClick:this.props.onLinkClick},a));return a}return null};a.prototype.render=function(){return b("React").createElement("div",{className:"_3bkw"},b("React").createElement("div",{className:"_3bky"},this.$1(),this.$2(),b("React").createElement("div",{className:"_3bkz _13dc"},b("React").createElement(b("FBStoriesLocationSecondaryText.react"),{explicitLocation:this.props.storyMetadata.explicitLocation}))))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesTimer",["EventEmitter","VideoPlayerController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=0,i=1e3;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(a){__p&&__p();g.constructor.call(this);this.$FBStoriesTimer10=function(){__p&&__p();if(this.$FBStoriesTimer8){this.$FBStoriesTimer1=this.$FBStoriesTimer8.getPlaybackDuration()*i;var a=this.$FBStoriesTimer8.getCurrentTimePosition();this.$FBStoriesTimer5=a*i;this.$FBStoriesTimer9&&(this.$FBStoriesTimer5%=this.$FBStoriesTimer1)}else{a=Date.now();var b=a-this.$FBStoriesTimer6;this.$FBStoriesTimer6=a;this.$FBStoriesTimer5+=b}a=this.$FBStoriesTimer2+(this.$FBStoriesTimer3-this.$FBStoriesTimer2)*(this.$FBStoriesTimer5/this.$FBStoriesTimer1);b=Math.min(this.$FBStoriesTimer3,a);this.emit("tick",b);if(b===this.$FBStoriesTimer3)this.emit("done"),this.$FBStoriesTimer7&&clearTimeout(this.$FBStoriesTimer7);else{a=this.$FBStoriesTimer1-this.$FBStoriesTimer5;b=Math.min(a,h);this.$FBStoriesTimer7=setTimeout(this.$FBStoriesTimer10,b)}}.bind(this);var b=a.duration,c=a.vpc,d=a.start,e=a.end;a=a.loop;this.$FBStoriesTimer1=b;this.$FBStoriesTimer2=d===undefined?0:d;this.$FBStoriesTimer3=e===undefined?100:e;this.$FBStoriesTimer8=c;this.$FBStoriesTimer9=!!a;this.$FBStoriesTimer6=0;this.$FBStoriesTimer4=!1;this.$FBStoriesTimer5=0}a.prototype.getTimeElapsed=function(){return this.$FBStoriesTimer5};a.prototype.setTimeElapsed=function(a){this.$FBStoriesTimer5=a};a.prototype.onDone=function(a){return this.addListener("done",a)};a.prototype.onTick=function(a){return this.addListener("tick",function(b){return a(b)})};a.prototype.pause=function(){clearTimeout(this.$FBStoriesTimer7)};a.prototype.play=function(){this.$FBStoriesTimer6=Date.now(),this.$FBStoriesTimer10()};a.prototype.stop=function(){this.$FBStoriesTimer6=0,clearTimeout(this.$FBStoriesTimer7)};e.exports=a}),null);
__d("StoriesViewerSphericalPhoto.react",["cx","BootloadedComponent.react","JSResource","PhotoProjection","React","SphericalPhotoUtils","XUISpinner.react","SphericalMediaConstants"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("PhotoProjection").TILED_CUBEMAP,j=b("PhotoProjection").CUBESTRIP,k=b("SphericalPhotoUtils").getMetadataFromGraphQLResult,l=b("SphericalPhotoUtils").calculatePartialLimits,m=b("SphericalPhotoUtils").parseNumber,n=b("SphericalMediaConstants").LOGGER_SURFACES;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.componentDidMount=function(){this.props.onImageLoad()};a.prototype.render=function(){__p&&__p();var a=this.props.photoEncodings.find(function(a){a=a.projection_type;return a===j||a===i}),c=this.props.photoEncodings.find(function(a){a=a.projection_type;return a===i}),d=k(a?a.spherical_metadata:{});a=a?a.cdn_uri:"";var e={fov:m(d.InitialViewVerticalFOVDegrees),pitch:m(d.InitialViewPitchDegrees),yaw:m(d.InitialViewRollDegrees)},f=l(d);c={useTiledRenderer:c?c.tiles.length!==0:!1,initialTileUris:c?c.tiles:[],viewportTileUris:[],maxTileLevel:c?c.max_tile_level:0};var g=b("React").createElement(b("XUISpinner.react"),{size:"large"});return b("React").createElement("div",{className:"_24cp"},b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SphericalPhotoViewer.react").__setRef("StoriesViewerSphericalPhoto.react"),bootloadPlaceholder:g,canvasNamespace:"Stories",cubeImageURI:a,enableGyro:!0,enableRubberBanding:!0,enableZoom:!0,enableTagging:!1,height:this.props.height,initialView:e,partialLimits:f,photoID:this.props.photoID,photoSphereMetadata:d,surface:n.stories,thumbnail:this.props.thumbnail,tiledSphericalConfig:c,width:this.props.width}))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("CameraPostMedia.react",["cx","BackgroundImage.react","BlurredBackgroundImage.react","CameraPostLinkComponent.react","CameraPostMediaGradientBackground.react","CameraPostMediaHelper","CameraPostMuteButton.react","CameraPostDefaultBackground.react","CameraPostSATPBackground.react","CameraPostSATPComponent.react","CameraPostPlainTextComponent.react","CameraPostWithTagsComponent.react","CameraPostTypes","FBStoriesLocationComponent.react","FBStoryMetadataUtils","CameraPostMinutiaeComponent.react","createCancelableFunction","emptyFunction","EventListener","FBLogger","FBStoriesActions","FBStoriesGatingConfig","FBStoriesTimer","idx","QE2Logger","React","ReactCSSTransitionGroup","StoriesViewerSphericalPhoto.react","SubscriptionsHandler","VideoComponentAutoPlayControl.react","VideoComponentCommercialBreakLiveTransitionOverlay.react","VideoComponentCommercialBreakVideoAdOverlay.react","VideoComponentLiveAudioAnimation.react","VideoComponentLiveEndScreen.react","VideoComponentLiveInterruptedScreen.react","VideoComponentLiveVideoIndicator.react","VideoComponentStreamingReactionTray.react","VideoComponentWithCommercialBreak.react","VideoComponentWithInstreamVideo.react","VideoComponentWithLiveBroadcast.react","VideoComponentWithLoopingPlayback.react","VideoDataContainer.react","VideoPlayer.react","VideoPlayerController","VideoPlayerLoggerSource","VideoPlayerOrigins","VideoPlayerReason","VideoPlayerReasonTransitionHelper","VideoPlayerStates","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i={enter:"_3dep",enterActive:"_3deq",leave:"_3der",leaveActive:"_3deu"},j=6e3,k="fb_stories_web_spherical_photo",l=1e3,m=200,n=12e3,o=200,p=200,q=b("FBStoriesGatingConfig").sphericalPhotoEnabled;a=babelHelpers.inherits(r,b("React").Component);h=a&&a.prototype;function r(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={height:0,width:0,showLoadingSpinner:!1},this.state={height:0,width:0,showLoadingSpinner:!1},this.$15=function(a){this.props.onTimeUpdate&&this.props.onTimeUpdate(a)}.bind(this),this.$10=function(){this.$16(j)}.bind(this),this.$19=function(){this.$6(),this.$20(this.props.cameraPostType)&&this.$10()}.bind(this),this.$21=function(){this.$6(),this.$20(this.props.cameraPostType)&&this.$17()}.bind(this),this.$6=b("createCancelableFunction")(function(){var a=r.getMediaSizeBasedOnWindow(),b=a.width;a=a.height;this.setState({height:a,width:b})}.bind(this)),this.$22=function(a){a||b("FBLogger")("FIXME").mustfix("onUpdateMetaData, VideoPlayerController is undefined.");if(a&&!this.$1){var c=a.getPlaybackDuration();this.$18(c,a)}this.props.isMediaMuted?a&&a.mute():a&&a.unmute();this.props.paused&&(a&&a.pause(b("VideoPlayerReason").USER),this.props.onVideoPaused&&this.props.onVideoPaused())}.bind(this),this.$25=function(){!this.props.disableAutoplay&&!this.props.paused&&this.$2.vpc.getState()!==b("VideoPlayerStates").PLAYING&&this.$2.vpc.play(new(b("VideoPlayerReasonTransitionHelper"))(b("VideoPlayerReason").AUTOPLAY))}.bind(this),this.$26=function(a){this.$4=a}.bind(this),c}r.getMediaSizeBasedOnWindow=function(){var a=window.innerHeight,b;void 0;var c;void 0;a<=700?(b=520,c=292):a>=1350?(b=1080,c=608):(b=a*.83625-48,c=b*(292/520));return{width:c,height:b}};r.prototype.componentDidMount=function(){this.$6(),window.onresize=this.$6,(this.$7()||this.$8()||this.$9())&&this.$10()};r.prototype.componentWillUnmount=function(){this.$1&&(this.$1.stop(),delete this.$1),this.$6.cancel(),this.$5&&this.$5.release()};r.prototype.UNSAFE_componentWillUpdate=function(a){a.paused!==this.props.paused&&(a.paused?(this.$1&&this.$1.pause(),this.$2&&this.$2.vpc.pause(b("VideoPlayerReason").USER)):(this.$1&&this.$1.play(),this.$2&&this.$2.vpc.play(b("VideoPlayerReason").USER)));a.isMediaMuted!==this.props.isMediaMuted&&(a.isMediaMuted?this.$2&&this.$2.vpc.mute():this.$2&&this.$2.vpc.unmute());this.$5&&(a.threadID!==this.props.threadID||((a=a)!=null?(a=a.media)!=null?a.id:a:a)!==((a=this.props)!=null?(a=a.media)!=null?a.id:a:a))&&(this.$5.release(),this.$5=null)};r.prototype.$11=function(){return b("CameraPostMediaHelper").isSphericalPhoto(this.props.media)};r.prototype.$12=function(){return b("CameraPostMediaHelper").isImage(this.props.media)};r.prototype.$13=function(){return b("CameraPostMediaHelper").isVideo(this.props.media)};r.prototype.$7=function(){return this.props.satpData.wwwTextFormatMetadata!==null};r.prototype.$8=function(){return this.props.isPlainText&&this.props.messageText&&!this.$14()};r.prototype.$14=function(){return this.props.linkAttachment&&this.props.linkAttachment.url};r.prototype.$9=function(){return b("FBStoryMetadataUtils").isMetadataOnly(this.props.storyMetadata.explicitLocation,this.props.storyMetadata.inlineActivities,this.props.storyMetadata.withTags,this.props.messageText,this.props.media,this.props.linkAttachment)};r.prototype.$16=function(a,c){this.props.onDone&&this.props.onTimeUpdate&&(this.$1=new(b("FBStoriesTimer"))({duration:a,vpc:c,loop:this.props.loopTimer}),this.$1.onTick(this.$15),this.props.onDone&&this.$1.onDone(this.props.onDone),this.props.paused||this.$1.play())};r.prototype.$17=function(){this.$16(n)};r.prototype.$18=function(a,b){this.$16(a*l,b)};r.prototype.$23=function(a){switch(a){case b("CameraPostTypes").DIRECT:case b("CameraPostTypes").DIRECT_NUX:case b("CameraPostTypes").GROUP_DIRECT:return b("VideoPlayerOrigins").DIRECT_INBOX;case b("CameraPostTypes").STORY:case b("CameraPostTypes").STORY_NUX:case b("CameraPostTypes").EVENT_STORY:case b("CameraPostTypes").GROUP_STORY:case b("CameraPostTypes").PAGE_STORY:return b("VideoPlayerOrigins").FB_STORIES;default:b("FBLogger")("FIXME").mustfix("invalid Camera Post Type "+a);return b("VideoPlayerOrigins").BACKSTAGE}};r.prototype.$20=function(a){switch(a){case b("CameraPostTypes").STORY:case b("CameraPostTypes").STORY_NUX:case b("CameraPostTypes").EVENT_STORY:case b("CameraPostTypes").GROUP_STORY:case b("CameraPostTypes").PAGE_STORY:return!0;default:return!1}};r.prototype.$24=function(a){__p&&__p();if(this.$5||!a)return;var c=a.vpc;this.$5=new(b("SubscriptionsHandler"))();this.$5.addSubscriptions(c.addListener("commercialBreak/hideUFI",function(){return b("FBStoriesActions").setIsCommercialBreakRunning(c.getVideoID(),!0)}),c.addListener("commercialBreak/showUFI",function(){return b("FBStoriesActions").setIsCommercialBreakRunning(c.getVideoID(),!1)}),c.addListener("turnOffAutoplay",function(a){a=(a=a)!=null?a.reason:a;if(a!=="manually_paused")return;this.props.onVideoPaused&&this.props.onVideoPaused()}.bind(this)),c.addListener("bufferingChanged",function(){this.setState({showLoadingSpinner:c.isBuffering()})}.bind(this)),c.addListener("pendingPlayRequestChanged",function(){this.setState({showLoadingSpinner:c.isPlayRequestPending()})}.bind(this)));c.runOnApiReady(function(){this.$25(),this.$5&&this.$5.addSubscriptions(c.getVideoAPI().addListener("qualityChange",this.$25))}.bind(this));this.props.isBucketLive&&b("EventListener").listen(c.getRootNode(),"contextmenu",function(event){event.preventDefault()})};r.prototype.render=function(){__p&&__p();var a=this.props,c=a.cameraPostType,d=a.media,e=a.showOverlay,f=a.isMediaMuted,g=a.onMuteMouseUp;a=a.showMuteButton;e=e?b("React").createElement(b("ReactCSSTransitionGroup"),{transitionName:i,transitionEnterTimeout:m,transitionLeaveTimeout:m},b("React").createElement("div",{className:"_3dew"})):null;var h=b("React").createElement(b("XUISpinner.react"),{background:"dark",className:"_2out",size:"large"});a=a?b("React").createElement(b("ReactCSSTransitionGroup"),{transitionName:i,transitionEnterTimeout:o,transitionLeaveTimeout:p},b("React").createElement(b("CameraPostMuteButton.react"),{muted:f,onMouseUp:g})):null;if(this.$13()){f=this.props.useVideoPlayerAutoplay||this.props.isBucketLive;g=b("React").createElement(b("VideoDataContainer.react"),{videoID:b("CameraPostMediaHelper").getId(d),renderLoading:function(){return h}},b("React").createElement(b("VideoPlayer.react"),{videoData:b("VideoDataContainer.react").VIDEO_DATA_PLACEHOLDER,playerOrigin:this.$23(c),subOrigin:b("VideoPlayerLoggerSource").CAMERA_POST,autoplay:!this.props.disableAutoplay&&f,ref:function(a){this.$2=a,this.$24(a)}.bind(this),onUpdateMetadata:this.$22,className:"_1s5n"+(this.props.isBucketLive?" _3r0u":"")},!this.props.disableAutoplay&&!f&&b("React").createElement(b("VideoComponentAutoPlayControl.react"),null),b("React").createElement(b("VideoComponentWithLiveBroadcast.react"),null),b("React").createElement(b("VideoComponentLiveAudioAnimation.react"),null),b("React").createElement(b("VideoComponentLiveEndScreen.react"),null),b("React").createElement(b("VideoComponentLiveVideoIndicator.react"),null),b("React").createElement(b("VideoComponentLiveInterruptedScreen.react"),null),b("React").createElement(b("VideoComponentStreamingReactionTray.react"),null),b("React").createElement(b("VideoComponentWithInstreamVideo.react"),null),b("React").createElement(b("VideoComponentWithCommercialBreak.react"),null),b("React").createElement(b("VideoComponentCommercialBreakVideoAdOverlay.react"),null),b("React").createElement(b("VideoComponentCommercialBreakLiveTransitionOverlay.react"),null),this.props.loop&&b("React").createElement(b("VideoComponentWithLoopingPlayback.react"),{infiniteLooping:!0})));f=b("React").createElement(b("BlurredBackgroundImage.react"),{width:this.state.width,height:this.state.height,src:b("CameraPostMediaHelper").getImageUri(d),fallbackSrc:b("CameraPostMediaHelper").getBlurImageUri(d)});return b("React").createElement("div",{className:"_ide",onMouseUp:this.props.onMouseUp,onMouseDown:this.props.onMouseDown},f,g,a,e,this.state.showLoadingSpinner&&h,this.props.children)}if(this.$7()){f=b("React").createElement(b("CameraPostSATPComponent.react"),{satpData:this.props.satpData,className:"_1s5n"});return b("React").createElement("div",{className:"_ide",onMouseUp:this.props.onMouseUp,onMouseDown:this.props.onMouseDown,ref:this.$26},this.$27(),f,this.$20(c)&&a,e,this.props.children)}if(this.$14())return b("React").createElement("div",{className:"_ide",onMouseUp:this.props.onMouseUp,onMouseDown:this.props.onMouseDown,ref:this.$26},this.$27(),b("React").createElement(b("CameraPostLinkComponent.react"),{width:this.state.width,height:this.state.height,linkAttachment:this.props.linkAttachment,onFirstMediaLoaded:this.$10,paused:this.props.paused,messageText:this.props.messageText,mediaBackgroundInfo:this.props.mediaBackground}),this.$20(c)&&a,e,this.props.children);if(this.$8())return b("React").createElement("div",{className:"_ide",onMouseUp:this.props.onMouseUp,onMouseDown:this.props.onMouseDown,ref:this.$26},this.$27(),b("React").createElement(b("CameraPostPlainTextComponent.react"),{className:"_1s5n",messageText:this.props.messageText}),this.$20(c)&&a,e,this.props.children);if(this.$12()){g=null;b("QE2Logger").logExposureForUser(k);if(q&&this.$11()){f=this.props.media&&this.props.media.photo_encodings?this.props.media.photo_encodings:[];var j=this.props.media&&this.props.media.image&&this.props.media.image.uri?this.props.media.image.uri:"";g=b("React").createElement(b("StoriesViewerSphericalPhoto.react"),{photoID:b("CameraPostMediaHelper").getId(d),height:this.state.height,width:this.state.width,thumbnail:j,photoEncodings:f,onImageLoad:this.$21})}else g=b("React").createElement(b("BackgroundImage.react"),{src:b("CameraPostMediaHelper").getImageUri(d),backgroundSize:"contain",width:this.state.width,height:this.state.height,className:"_1s5n",onImageLoad:this.$19,loadingIndicatorStyle:"large"});j=b("React").createElement(b("BlurredBackgroundImage.react"),{width:this.state.width,height:this.state.height,src:b("CameraPostMediaHelper").getImageUri(d),fallbackSrc:b("CameraPostMediaHelper").getBlurImageUri(d)});return b("React").createElement("div",{className:"_ide",onClick:this.props.onClick,onMouseUp:this.props.onMouseUp,onMouseDown:this.props.onMouseDown,ref:this.$26},j,g,this.$20(c)&&a,e,this.props.children)}if(this.$9()){f=null;b("FBStoryMetadataUtils").locationExists(this.props.storyMetadata.explicitLocation)?f=b("React").createElement(b("FBStoriesLocationComponent.react"),{storyMetadata:this.props.storyMetadata,openWithSidePanel:this.props.openWithSidePanel,onLinkClick:this.props.onLinkClick}):b("FBStoryMetadataUtils").minutiaeExists(this.props.storyMetadata.inlineActivities)?f=b("React").createElement(b("CameraPostMinutiaeComponent.react"),{storyMetadata:this.props.storyMetadata,openWithSidePanel:this.props.openWithSidePanel,onLinkClick:this.props.onLinkClick}):b("FBStoryMetadataUtils").withTagsExists(this.props.storyMetadata.withTags)&&(f=b("React").createElement(b("CameraPostWithTagsComponent.react"),{storyMetadata:this.props.storyMetadata,openWithSidePanel:this.props.openWithSidePanel,onLinkClick:this.props.onLinkClick}));return b("React").createElement("div",{className:"_ide",onMouseUp:this.props.onMouseUp,onMouseDown:this.props.onMouseDown,ref:this.$26},this.$27(),f,this.$20(c)&&a,e,this.props.children)}d="Error: media type not found "+String(b("CameraPostMediaHelper").getType(this.props.media));b("FBLogger")("FIXME").mustfix(d);return b("React").createElement("div",{className:"_ide",onClick:this.props.onClick,onMouseUp:this.props.onMouseUp,onMouseDown:this.props.onMouseDown},h,e,this.props.children)};r.prototype.$27=function(){var a;a=(a=this.props.backdropImage)!=null?(a=a.image)!=null?a.uri:a:a;if(a)return b("React").createElement(b("BlurredBackgroundImage.react"),{width:this.state.width,height:this.state.height,src:a});if(this.$7())return b("React").createElement(b("CameraPostSATPBackground.react"),{satpData:this.props.satpData});return this.$14()&&this.props.mediaBackground?b("React").createElement(b("CameraPostMediaGradientBackground.react"),{data:this.props.mediaBackground}):b("React").createElement(b("CameraPostDefaultBackground.react"),{data:this.props.defaultBackground})};r.defaultProps={disableAutoplay:!1,useVideoPlayerAutoplay:!1,loop:!1,loopTimer:!1,media:{id:"",__typename:"Video",preview_image:null,image:null,image_blurred:null},showMuteButton:!0,showOverlay:!1,onTimeUpdate:function(a){},onDone:b("emptyFunction"),onClick:b("emptyFunction"),onMouseUp:b("emptyFunction"),onMouseDown:b("emptyFunction"),paused:!1,cameraPostType:"",userID:null,threadID:null,width:1,height:1,isBucketLive:!1,isMediaMuted:!1,onMuteMouseUp:b("emptyFunction"),satpData:{rootMessageText:"",wwwTextFormatMetadata:null,textFormatMetadata:null},onVideoPaused:b("emptyFunction"),messageText:"",isPlainText:!1,backdropImage:null,defaultBackground:null,storyMetadata:{},openWithSidePanel:function(){},linkAttachment:null,onLinkClick:function(){},mediaBackground:null};e.exports=r}),null);
__d("CameraPostSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({API:"API",NO_COMPOSER:"NO_COMPOSER",CAMERA_SYSTEM:"CAMERA_SYSTEM",COMPOSER:"COMPOSER",FB_STORIES_WEB:"FB_STORIES_WEB",NEWSFEED:"NEWSFEED",INSTAGRAM:"INSTAGRAM",MESSENGER:"MESSENGER",LIVE:"LIVE",FACEBOOK_PROMOTIONS:"FACEBOOK_PROMOTIONS",PLATFORM_COMPOSER:"PLATFORM_COMPOSER"})}),null);
__d("CameraPostOwnerInfo.react",["cx","fbt","CameraPostSource","ProfileLink.react","React","CameraPostAppAttribution.react","formatDate","Timestamp.react","Tooltip.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=function(a,b,c){var d=[];b.forEach(function(a){a[c]&&d.push(a[c])});return d},j=function(a,b,c){var d=[];b.forEach(function(b){b.id!==a&&b[c]&&d.push(b[c])});return d},k=function(a,b,c){a=i(a,b,c);return a.join(", ")},l=function(a,b,c){a=j(a,b,c);b=a.reduce(function(a,b){if(a.showingNames==="")return{showingNames:b,others:a.others};return(a.showingNames+", "+b).length<20?{showingNames:a.showingNames+", "+b,others:a.others}:{showingNames:a.showingNames,others:a.others+1}},{showingNames:"",others:0});return b.others>0?h._({"s":"{names_of_members} and {num_others} other","p":"{names_of_members} and {num_others} others"},[h._param("names_of_members",b.showingNames),h._param("num_others",b.others),h._enum(b.others===1?"s":"p",{s:"other",p:"others"})]):b.showingNames},m=function(a,b,c,d){return c!==""&&c!==null?c:l(a,b,d)},n=function(a,c,d){a=k(a,c,d);return b("React").createElement("div",null,b("React").createElement("p",{className:"_3gpm"},h._("Group Members")),b("React").createElement("p",{className:"_3gpn"},a))};a=function(a){__p&&__p();var c=a.id,d=a.instagramProfileURL,e=a.isSphericalPhoto,f=a.name,g=a.threadID,i=a.time,j=a.cameraPostType,k=a.cameraPostSource,l=a.participants,o=a.groupName,p=a.originalPostStoryAttribution;a=function(){if(j==="GROUP_DIRECT")return b("React").createElement("p",{className:"_v5n"},f,b("React").createElement("span",{className:"_3gpo"},"\xa0to\xa0"),b("React").createElement(b("Tooltip.react"),{tooltip:n(c,l,"name"),position:"below"},m(c,l,o,"short_name")));else return b("React").createElement(b("ProfileLink.react"),{uid:c,target:"_blank",className:"_v5n"},f)};var q=b("React").createElement(b("Timestamp.react"),{autoUpdate:!0,time:i,text:b("formatDate")(i,"M j, Y",{utc:!0})});i=function(){if(p)return b("React").createElement("div",{className:"_v5o"},q,"\xa0\u2022\xa0",b("React").createElement(b("CameraPostAppAttribution.react"),{currentThreadID:g,postStoryAttribution:p}));else if(k===b("CameraPostSource").INSTAGRAM)return d?b("React").createElement("div",{className:"_v5o"},q,"\xa0\u2022\xa0",b("React").createElement("a",{className:"_3bfe",href:d,target:"_blank"},h._("Instagram"))):b("React").createElement("div",{className:"_v5o"},q,"\xa0\u2022\xa0",h._("Instagram"));else if(k===b("CameraPostSource").LIVE)return b("React").createElement("div",{className:"_v5o"},q,"\xa0 \u2022 \xa0",h._("Recorded Live"));else if(e)return b("React").createElement("div",{className:"_v5o"},q,"\xa0\u2022\xa0",h._("360 Photo"));return b("React").createElement("div",{className:"_v5o"},q)};return b("React").createElement("div",{className:"_60x1"},a(),i())};e.exports=a}),null);
__d("CameraPostOwnerPic.react",["cx","React","UserAgent","AvailableListConstants","FBStoriesGatingConfig","Image.react","PresenceStatus","ProfileLink.react","QE2Logger"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="fb_stories_web_show_user_online_status_universe",i=b("React").createElement("svg",{width:"0",height:"0"},b("React").createElement("defs",null,b("React").createElement("clipPath",{id:"storyUserOnlineStatus"},b("React").createElement("path",{d:"M37.5639554,29.5738543 C36.7864951,29.2058421 35.917286,29 35,29 C31.6862915,29 29,31.6862915 29,35 C29,35.917286 29.2058421,36.7864951 29.5738543,37.5639554 C26.7304079,39.1171646 23.4683026,40 20,40 C8.954305,40 0,31.045695 0,20 C0,8.954305 8.954305,0 20,0 C31.045695,0 40,8.954305 40,20 C40,23.4683026 39.1171646,26.7304079 37.5639554,29.5738543 Z",fill:"black"}))));a=function(a){__p&&__p();var c=a.profile_picture;a=a.id;if(!c)return null;var d=b("FBStoriesGatingConfig").userOnlineStatusEnabled,e=b("PresenceStatus").get(a)===b("AvailableListConstants").ACTIVE;if(d&&e){b("QE2Logger").logExposureForUser(h);if(b("UserAgent").isBrowser("Chrome"))return b("React").createElement(b("ProfileLink.react"),{uid:a,target:"_blank",tabIndex:"-1"},i,b("React").createElement(b("Image.react"),{src:c.uri,className:"_1yfe"}),b("React").createElement("div",{className:"_1yff"}));else return b("React").createElement(b("ProfileLink.react"),{uid:a,target:"_blank",tabIndex:"-1"},b("React").createElement(b("Image.react"),{src:c.uri,className:"_1___"}),b("React").createElement("span",{className:"_2jlv"}))}else return b("React").createElement(b("ProfileLink.react"),{uid:a,target:"_blank",tabIndex:"-1"},b("React").createElement(b("Image.react"),{src:c.uri,className:"_1___"}))};e.exports=a}),null);
__d("CameraPostOwnerView.react",["cx","CameraPostTypesHelper","React","CameraEventGroupPostOwnerInfo.react","CameraEventGroupPostOwnerPic.react","CameraPostOwnerPic.react","CameraPostOwnerInfo.react","CameraPostBucketOwnerHelper","CameraPostThreadOwnerHelper"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();var c=a.bucketOwner,d=a.instagramProfileURL,e=a.isSphericalPhoto,f=a.threadID,g=a.threadOwner,h=a.time,i=a.cameraPostType,j=a.cameraPostSource,k=a.participants,l=a.groupName;a=a.originalPostStoryAttribution;var m=b("CameraPostBucketOwnerHelper").getId(c),n=b("CameraPostBucketOwnerHelper").getName(c);if(b("CameraPostTypesHelper").isMultiAuthor(i)){var o=b("CameraPostThreadOwnerHelper").getName(g),p=b("CameraPostThreadOwnerHelper").getId(g);g={uri:b("CameraPostThreadOwnerHelper").getProfilePictureUri(g)};var q={uri:b("CameraPostBucketOwnerHelper").getProfilePictureUri(c)};return b("React").createElement("div",{className:"_116v"},b("React").createElement(b("CameraEventGroupPostOwnerPic.react"),{bucketOwnerId:m,threadOwnerId:p,bucketProfilePicture:q,threadProfilePicture:g,cameraPostType:i}),b("React").createElement(b("CameraEventGroupPostOwnerInfo.react"),{bucketOwnerId:m,threadOwnerId:p,bucketOwnerName:n,originalPostStoryAttribution:a,threadID:f,threadOwnerName:o,time:h}))}q={uri:b("CameraPostBucketOwnerHelper").getProfilePictureUri(c)};return b("React").createElement("div",{className:"_116v"},b("React").createElement(b("CameraPostOwnerPic.react"),{profile_picture:q,id:m}),b("React").createElement(b("CameraPostOwnerInfo.react"),{id:m,instagramProfileURL:d,isSphericalPhoto:e,name:n,threadID:f,time:h,cameraPostType:i,cameraPostSource:j,participants:k||[],groupName:l||"",originalPostStoryAttribution:a}))};e.exports=a}),null);
__d("CameraPostReportButton.react",["ix","cx","fbt","FRXEntryPoint","XRapidReportingDialogController","asset","AsyncRequest","CameraFileBugButton.react","NFXStoryLocation","React","Image.react","PopoverMenu.react","ReactMenu","ReactXUIMenu"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReactMenu").Item;a=function(a){var c=function(){var c=JSON.stringify({reportable_ent_token:a.threadID,story_location:b("NFXStoryLocation").DIRECT_MESSAGING,entry_point:b("FRXEntryPoint").REPORT_BUTTON});c=b("XRapidReportingDialogController").getURIBuilder().setString("context",c).getURI();c=new(b("AsyncRequest"))().setURI(c);c.send()};c=[].concat(a.children||[],[a.isOwnThread?null:b("React").createElement(j,{onClick:c,key:"report"},b("React").createElement(b("Image.react"),{src:g("372467")}),i._("Give Feedback or Report Story")),b("CameraFileBugButton.react")()]);c=b("React").createElement(b("ReactXUIMenu"),{className:"_2sh1",onItemClick:a.onPopoverItemClick},c);return b("React").createElement("div",{className:"_2sh5"},b("React").createElement(b("PopoverMenu.react"),{alignv:"bottom",alignh:"center","aria-label":i._("More"),menu:c,position:"below",onItemClick:a.onPopoverItemClick,onShow:a.onPopoverShow,onHide:a.onPopoverHide},b("React").createElement("a",{href:"#"},b("React").createElement(b("Image.react"),{src:g("375454")}))))};e.exports=a}),null);
__d("CameraPostSendReply.react",["cx","fbt","BusinessConversationEvent","BusinessConversationEventTarget","BusinessConversationLogger","CameraPostTypes","ChatComposerFlyoutButtonBootLoader.react","ClickableArea.react","EmojiFormat","FBStoriesGatingConfig","JSResource","React","QE2Logger","emptyFunction","Image.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").Component;var j="fb_stories_web_show_reply_stickers_universe";d=babelHelpers.inherits(a,c);i=d&&d.prototype;function a(a){__p&&__p();i.constructor.call(this,a),this.$1=function(a){this.setState({replyText:a.target.value})}.bind(this),this.$2=function(event){if(event.key==="Enter"){var a=this.state.replyText.trim();if(a.length===0)return;this.props.onReplyEntered(a);this.setState({replyText:""})}}.bind(this),this.$4=function(a){return this.$3=a}.bind(this),this.$10=function(a){var c=b("EmojiFormat").codeArrayToUnicode(a);this.setState(function(a){return{replyText:a.replyText+c}})}.bind(this),this.state={replyText:""}}a.prototype.componentDidMount=function(){this.props.cameraPostType===b("CameraPostTypes").PAGE_STORY&&this.props.ownerID&&b("BusinessConversationLogger").log(this.props.ownerID,b("BusinessConversationEvent").IMPRESSION,b("BusinessConversationEventTarget").PAGE_STORY_REPLY_BAR,"page_stories_www",{}),this.props.focused?this.$3.focus():this.$3.blur(),b("QE2Logger").logExposureForUser(j)};a.prototype.componentDidUpdate=function(a,b){a.focused!==this.props.focused&&(this.props.focused?this.$3.focus():this.$3.blur())};a.prototype.render=function(){return b("React").createElement("div",{className:"_2dvt"},b("React").createElement("div",{className:"_2dv-"},b("React").createElement(b("Image.react"),{src:this.props.replyProfilePic,className:"_2dv_"})),b("React").createElement("div",{className:"_2dw0"},b("React").createElement("input",{className:"_3r4m",placeholder:h._("Write a reply..."),ref:this.$4,value:this.state.replyText,onChange:this.$1,onFocus:this.props.onFocusInput,onBlur:this.props.onBlurInput,onKeyPress:this.$2,onMouseUp:this.$5}),this.$6()))};a.prototype.$6=function(){var a=b("FBStoriesGatingConfig").replyButtonsEnabled;return!a?null:b("React").createElement("div",{className:"_2jcv"},this.$7(),this.$8(),this.$9())};a.prototype.$7=function(){var a={onSelect:this.$10,getInput:function(){return this.$3}.bind(this)};return b("React").createElement(b("ClickableArea.react"),{onClick:this.props.onFocusInput},b("React").createElement("div",null,b("React").createElement(b("ChatComposerFlyoutButtonBootLoader.react"),{threadID:this.props.threadID,key:"emoji",interactionClassName:"_4ikx",flyoutAlignment:"left",iconClassName:"_3cgx _3cgy",flyoutLoader:b("JSResource")("ChatEmojiFlyout.react").__setRef("CameraPostSendReply.react"),dialogProps:{offsetY:10},flyoutProps:a,title:h._("Choose an emoji")})))};a.prototype.$9=function(){var a={threadID:this.props.threadID,onStickerSelect:this.props.onStickerSelect},c={className:"_5e-r",position:"above"};return b("React").createElement(b("ClickableArea.react"),{onClick:this.props.onFocusInput},b("React").createElement("div",null,b("React").createElement(b("ChatComposerFlyoutButtonBootLoader.react"),{flyoutProps:a,dialogProps:c,flyoutAlignment:"left",key:"sticker",interactionClassName:"_4ikx",iconClassName:"_3cgx _2jcw",flyoutLoader:b("JSResource")("StickersFlyoutWrapper.react").__setRef("CameraPostSendReply.react"),title:h._("Choose a sticker")})))};a.prototype.$8=function(){var a={getQuery:function(){return null},onSelect:this.props.onGifSelect};return b("React").createElement(b("ClickableArea.react"),{onClick:this.props.onFocusInput},b("React").createElement("div",null,b("React").createElement(b("ChatComposerFlyoutButtonBootLoader.react"),{threadID:this.props.threadID,key:"gif",interactionClassName:"_4ikx",flyoutProps:a,flyoutAlignment:"left",iconClassName:"_3cgx _4iky",flyoutLoader:b("JSResource")("ChatContentSearchFlyoutWrapper.react").__setRef("CameraPostSendReply.react"),title:h._("Choose a gif")})))};a.prototype.$5=function(a){a.preventDefault(),a.stopPropagation()};a.defaultProps={onFocusInput:b("emptyFunction"),onBlurInput:b("emptyFunction"),onMouseUp:b("emptyFunction")};e.exports=a}),null);
__d("CameraPostSendingToast.react",["ix","cx","fbt","Image.react","React","XUIText.react","asset","fbglyph","gkx"],(function(a,b,c,d,e,f,g,h,i){"use strict";a=function(){var a=b("gkx")("AT68VoO3FI8o9GetHQwJE3EDQKJcCxhu0nvhhfnwVsWYBpvSxs_UTrJX8fDUKntszXsGY50tl9YqFW-jL2vVKYjO")?g("415984"):g("114797");return b("React").createElement("div",{className:"_618_",key:"toast"},b("React").createElement("div",{className:"_j71"},b("React").createElement(b("Image.react"),{src:a})),b("React").createElement(b("XUIText.react"),{className:"_4b4i"},i._("Reply Sent")))};e.exports=a}),null);
__d("FBStoriesSpotlightViewer.react",["cx","ContextualThing","Event","React","ReactLayer","Spotlight.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("Spotlight.react"),{onHide:this.props.onHide,shown:!0,key:"photoLayer",behaviors:[i]},b("React").createElement("div",{className:"_n3"},this.props.children))};function a(){h.apply(this,arguments)}function i(a){this.$1=a}i.prototype.enable=function(){this.$2=b("Event").listen(this.$1.getRoot(),"click",function(event){return this.$3(event)}.bind(this),b("Event").Priority.URGENT)};i.prototype.$3=function(a){var c=this.$1.getContentRoot();a=a.getTarget();if(b("ContextualThing").containsIncludingLayers(c,a))return;this.$1.inform("blur",{target:a})};i.prototype.disable=function(){this.$2.remove()};e.exports=a}),null);
__d("FBStoriesCurrentThreadDataHelper",["idx"],(function(a,b,c,d,e,f){"use strict";a={getCameraPostType:function(a){return(a=a)!=null?a.cameraPostType:a},getCameraPostMedia:function(a){return(a=a)!=null?a.media:a}};e.exports=a}),null);
__d("FBStoriesTypeHelper",["CameraPostTypes"],(function(a,b,c,d,e,f){"use strict";a={isSomeStoryType:function(a){switch(a){case b("CameraPostTypes").STORY:case b("CameraPostTypes").STORY_NUX:case b("CameraPostTypes").EVENT_STORY:case b("CameraPostTypes").GROUP_STORY:case b("CameraPostTypes").PAGE_STORY:return!0;default:return!1}}};e.exports=a}),null);
__d("FBStoriesCardImageMedia.react",["cx","BackgroundImage.react","BlurredBackgroundImage.react","CameraPostTypes","FBStoriesTypeHelper","React","XUISpinner.react","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(){this.props.updateImageDimensions(),b("FBStoriesTypeHelper").isSomeStoryType(this.props.cameraPostType)&&this.props.setupImageTimer()}.bind(this),c}a.prototype.render=function(){if(!this.props.height||!this.props.imageSource||!this.props.width)return null;var a=b("React").createElement(b("XUISpinner.react"),{background:"dark",className:"_2out",size:"large"}),c=b("React").createElement(b("BackgroundImage.react"),{backgroundSize:"contain",className:"_1s5n",height:this.props.height,loadingIndicatorStyle:"large",onImageLoad:this.$1,src:this.props.imageSource,width:this.props.width}),d=b("React").createElement(b("BlurredBackgroundImage.react"),{fallbackSrc:this.props.blurImageSource,height:this.props.height,src:this.props.imageSource,width:this.props.width});return b("React").createElement("div",{className:"_ide",onMouseUp:this.props.onMouseUp,onMouseDown:this.props.onMouseDown,ref:this.props.mediaDivRef},d,c,this.props.showLoadingSpinner&&a)};a.defaultProps={blurImageSource:undefined,cameraPostType:b("CameraPostTypes").STORY,height:0,imageSource:undefined,mediaDivRef:b("emptyFunction"),onImageLoad:b("emptyFunction"),onMouseDown:b("emptyFunction"),onMouseUp:b("emptyFunction"),setupImageTimer:b("emptyFunction"),showLoadingSpinner:!1,updateImageDimensions:b("emptyFunction"),width:0};e.exports=a}),null);
__d("FBStoriesCardSATPMedia.react",["cx","CameraPostSATPComponent.react","React","XUISpinner.react","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){if(!this.props.satpData)return null;var a=b("React").createElement(b("XUISpinner.react"),{background:"dark",className:"_2out",size:"large"});return b("React").createElement("div",{className:"_ide",onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,ref:this.props.mediaDivRef},b("React").createElement(b("CameraPostSATPComponent.react"),{satpData:this.props.satpData,className:"_1s5n"}),this.props.showLoadingSpinner&&a)};function a(){h.apply(this,arguments)}a.defaultProps={mediaDivRef:b("emptyFunction"),onMouseDown:b("emptyFunction"),onMouseUp:b("emptyFunction"),satpData:{rootMessageText:"",wwwTextFormatMetadata:null,textFormatMetadata:null,backdropImage:null},showLoadingSpinner:!1};e.exports=a}),null);
__d("FBStoriesVideoHelper",["CameraPostTypes","FBLogger","VideoPlayerOrigins"],(function(a,b,c,d,e,f){"use strict";a={getVideoPlayerOrigins:function(a){switch(a){case b("CameraPostTypes").DIRECT:case b("CameraPostTypes").DIRECT_NUX:case b("CameraPostTypes").GROUP_DIRECT:return b("VideoPlayerOrigins").DIRECT_INBOX;case b("CameraPostTypes").STORY:case b("CameraPostTypes").STORY_NUX:case b("CameraPostTypes").EVENT_STORY:case b("CameraPostTypes").GROUP_STORY:case b("CameraPostTypes").PAGE_STORY:return b("VideoPlayerOrigins").FB_STORIES;default:b("FBLogger")("FIXME").mustfix("invalid Camera Post Type "+a);return b("VideoPlayerOrigins").BACKSTAGE}}};e.exports=a}),null);
__d("FBStoriesCardVideoMedia.react",["cx","BlurredBackgroundImage.react","CameraPostTypes","EventListener","FBLogger","FBStoriesActions","FBStoriesVideoHelper","React","SubscriptionsHandler","VideoComponentAutoPlayControl.react","VideoComponentCommercialBreakLiveTransitionOverlay.react","VideoComponentCommercialBreakVideoAdOverlay.react","VideoComponentLiveAudioAnimation.react","VideoComponentLiveEndScreen.react","VideoComponentLiveInterruptedScreen.react","VideoComponentLiveVideoIndicator.react","VideoComponentStreamingReactionTray.react","VideoComponentWithCommercialBreak.react","VideoComponentWithInstreamVideo.react","VideoComponentWithLiveBroadcast.react","VideoDataContainer.react","VideoPlayer.react","VideoPlayerController","VideoPlayerLoggerSource","VideoPlayerReason","VideoPlayerReasonTransitionHelper","VideoPlayerStates","XUISpinner.react","emptyFunction","idx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={showLoadingSpinner:!1},this.$3=function(a){a||b("FBLogger")("FIXME").mustfix("onUpdateMetaData, VideoPlayerController is undefined.");if(a&&!this.$5){var c=a.getPlaybackDuration();this.props.setupVideoTimer(c,a)}this.props.isMuted?a&&a.mute():a&&a.unmute()}.bind(this),c}a.prototype.componentWillUnmount=function(){this.$1&&this.$1.release()};a.prototype.UNSAFE_componentWillUpdate=function(a){a.isPaused!==this.props.isPaused&&(a.isPaused?this.$2&&this.$2.vpc.pause(b("VideoPlayerReason").USER):this.$2&&this.$2.vpc.play(b("VideoPlayerReason").USER)),a.isMuted!==this.props.isMuted&&(a.isMuted?this.$2&&this.$2.vpc.mute():this.$2&&this.$2.vpc.unmute()),this.$1&&a.videoID!==this.props.videoID&&(this.$1.release(),this.$1=null)};a.prototype.render=function(){if(!this.props.videoID)return null;var a=b("React").createElement(b("BlurredBackgroundImage.react"),{fallbackSrc:this.props.blurImageSource,height:this.props.height,src:this.props.imageSource,width:this.props.width}),c=b("React").createElement(b("XUISpinner.react"),{background:"dark",className:"_2out",size:"large"}),d=b("React").createElement(b("VideoDataContainer.react"),{renderLoading:function(){return c},videoID:this.props.videoID},b("React").createElement(b("VideoPlayer.react"),{autoplay:this.props.isLiveMedia,className:"_1s5n"+(this.props.isLiveMedia?" _3r0u":""),onUpdateMetadata:this.$3,playerOrigin:b("FBStoriesVideoHelper").getVideoPlayerOrigins(this.props.cameraPostType),ref:function(a){this.$2=a,this.$4(a)}.bind(this),subOrigin:b("VideoPlayerLoggerSource").CAMERA_POST,videoData:b("VideoDataContainer.react").VIDEO_DATA_PLACEHOLDER},!this.props.isLiveMedia&&b("React").createElement(b("VideoComponentAutoPlayControl.react"),null),b("React").createElement(b("VideoComponentWithLiveBroadcast.react"),null),b("React").createElement(b("VideoComponentLiveAudioAnimation.react"),null),b("React").createElement(b("VideoComponentLiveEndScreen.react"),null),b("React").createElement(b("VideoComponentLiveVideoIndicator.react"),null),b("React").createElement(b("VideoComponentLiveInterruptedScreen.react"),null),b("React").createElement(b("VideoComponentStreamingReactionTray.react"),null),b("React").createElement(b("VideoComponentWithInstreamVideo.react"),null),b("React").createElement(b("VideoComponentWithCommercialBreak.react"),null),b("React").createElement(b("VideoComponentCommercialBreakVideoAdOverlay.react"),null),b("React").createElement(b("VideoComponentCommercialBreakLiveTransitionOverlay.react"),null)));return b("React").createElement("div",{className:"_ide",onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,ref:this.props.mediaDivRef},a,d,(this.state.showLoadingSpinner||this.props.showLoadingSpinner)&&c)};a.prototype.$4=function(a){__p&&__p();if(this.$1||!a)return;var c=a.vpc;this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(c.addListener("commercialBreak/hideUFI",function(){return b("FBStoriesActions").setIsCommercialBreakRunning(c.getVideoID(),!0)}),c.addListener("commercialBreak/showUFI",function(){return b("FBStoriesActions").setIsCommercialBreakRunning(c.getVideoID(),!1)}),c.addListener("turnOffAutoplay",function(a){a=(a=a)!=null?a.reason:a;if(a!=="manually_paused")return;this.props.onVideoPaused&&this.props.onVideoPaused()}.bind(this)),c.addListener("bufferingChanged",function(){this.setState({showLoadingSpinner:c.isBuffering()})}.bind(this)),c.addListener("pendingPlayRequestChanged",function(){this.setState({showLoadingSpinner:c.isPlayRequestPending()})}.bind(this)),c.getVideoAPI().addListener("qualityChange",function(){c.getState()!==b("VideoPlayerStates").PLAYING&&c.play(new(b("VideoPlayerReasonTransitionHelper"))(b("VideoPlayerReason").AUTOPLAY))}));this.props.isLiveMedia&&b("EventListener").listen(c.getRootNode(),"contextmenu",function(event){event.preventDefault()})};a.defaultProps={blurImageSource:undefined,cameraPostType:b("CameraPostTypes").STORY,height:0,imageSource:undefined,isLiveMedia:!1,isMuted:!1,isPaused:!1,mediaDivRef:b("emptyFunction"),onMouseDown:b("emptyFunction"),onMouseUp:b("emptyFunction"),onVideoPaused:b("emptyFunction"),setupVideoTimer:b("emptyFunction"),showLoadingSpinner:!1,videoID:"",width:0};e.exports=a}),null);
__d("FBStoriesCardMedia.react",["cx","CameraPostMediaHelper","CameraPostTypes","FBLogger","FBStoriesCardImageMedia.react","FBStoriesCardSATPMedia.react","FBStoriesCardVideoMedia.react","FBStoriesTimer","React","VideoPlayerController","XUISpinner.react","createCancelableFunction","emptyFunction","idx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=6e3,j=1e3;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={height:0,showLoadingSpinner:!1,width:0},this.$10=function(a){this.props.onTimeUpdate&&this.props.onTimeUpdate(a)}.bind(this),this.$5=function(){this.$11(i)}.bind(this),this.$8=function(a,b){this.$11(a*j,b)}.bind(this),this.$3=b("createCancelableFunction")(function(){if(this.$1)this.setState({height:this.$1.clientHeight,width:this.$1.clientWidth});else{var a=window.innerHeight,b;void 0;var c;void 0;a<=700?(b=520,c=292):a>=1350?(b=1080,c=608):(b=a*.83625-48,c=b*(292/520));this.setState({height:b,width:c})}}.bind(this)),c}a.prototype.componentDidMount=function(){this.$3(),window.onresize=this.$3,this.$4()&&this.$5()};a.prototype.componentWillUnmount=function(){this.$2&&(this.$2.stop(),delete this.$2),this.$3.cancel()};a.prototype.UNSAFE_componentWillUpdate=function(a){a.paused!==this.props.paused&&(a.paused?this.$2&&this.$2.pause():this.$2&&this.$2.play())};a.prototype.render=function(){__p&&__p();if(!this.props.media)return null;if(this.$6())return b("React").createElement(b("FBStoriesCardImageMedia.react"),{blurImageSource:b("CameraPostMediaHelper").getBlurImageUri(this.props.media),cameraPostType:this.props.cameraPostType,height:this.state.height,imageSource:b("CameraPostMediaHelper").getImageUri(this.props.media),mediaDivRef:function(a){this.$1=a}.bind(this),onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,setupImageTimer:this.$5,showLoadingSpinner:this.state.showLoadingSpinner,updateDimensions:this.$3,width:this.state.width});if(this.$7())return b("React").createElement(b("FBStoriesCardVideoMedia.react"),{blurImageSource:b("CameraPostMediaHelper").getBlurImageUri(this.props.media),cameraPostType:this.props.cameraPostType,height:this.state.height,imageSource:b("CameraPostMediaHelper").getImageUri(this.props.media),isLiveMedia:this.props.isBucketLive,isMuted:this.props.isMediaMuted,isPaused:this.props.paused,mediaDivRef:function(a){this.$1=a}.bind(this),onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onVideoPaused:this.props.onVideoPaused,setupVideoTimer:this.$8,showLoadingSpinner:this.state.showLoadingSpinner,videoID:b("CameraPostMediaHelper").getId(this.props.media),width:this.state.width});if(this.$4())return b("React").createElement(b("FBStoriesCardSATPMedia.react"),{mediaDivRef:function(a){this.$1=a}.bind(this),onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,satpData:this.props.satpData,showLoadingSpinner:this.state.showLoadingSpinner});var a="Error: media type not found "+String(b("CameraPostMediaHelper").getType(this.props.media));b("FBLogger")("FIXME").mustfix(a);return b("React").createElement(k,{onMouseUp:this.props.onMouseUp,onMouseDown:this.props.onMouseDown})};a.prototype.$6=function(){return b("CameraPostMediaHelper").isImage(this.props.media)&&!this.$4()};a.prototype.$9=function(){return b("CameraPostMediaHelper").isSphericalPhoto(this.props.media)};a.prototype.$4=function(){var a;return((a=this.props)!=null?(a=a.satpData)!=null?a.wwwTextFormatMetadata:a:a)!==null};a.prototype.$7=function(){return b("CameraPostMediaHelper").isVideo(this.props.media)};a.prototype.$11=function(a,c){this.props.onDone&&this.props.onTimeUpdate&&(this.$2=new(b("FBStoriesTimer"))({duration:a,vpc:c}),this.$2.onTick(this.$10),this.props.onDone&&this.$2.onDone(this.props.onDone),this.props.paused||this.$2.play())};a.defaultProps={cameraPostType:b("CameraPostTypes").STORY,isBucketLive:!1,isMediaMuted:!1,media:{__typename:"Video",id:"",image:null,image_blurred:null,preview_image:null},onDone:b("emptyFunction"),onMouseDown:b("emptyFunction"),onMouseUp:b("emptyFunction"),onTimeUpdate:function(a){},onVideoPaused:b("emptyFunction"),paused:!1,satpData:{rootMessageText:"",wwwTextFormatMetadata:null,textFormatMetadata:null,backdropImage:null},threadID:null,userID:null};var k=function(a){return b("React").createElement("div",{className:"_ide",onMouseDown:a.onMouseDown,onMouseUp:a.onMouseUp},b("React").createElement(b("XUISpinner.react"),{background:"dark",className:"_2out",size:"large"}))};e.exports=a}),null);
__d("FBStoriesCardOptionsButton.react",["ix","cx","fbt","CameraPostReportButton.react","Image.react","React","ReactMenu","asset","emptyFunction","XUISpinner.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("ReactMenu").Item;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.render=function(){var a=[];this.props.isUserStory&&a.push(b("React").createElement(k,{disabled:this.props.isStoryUploading,onClick:this.props.onClickDelete,key:"delete_own_thread"},this.props.isStoryUploading&&b("React").createElement(b("XUISpinner.react"),{size:"small"}),b("React").createElement(b("Image.react"),{src:g("393044")}),this.$1(this.props.mediaType)));this.props.canMuteStoryOwner&&a.push(b("React").createElement(k,{onClick:this.props.onClickMuteStoryOwner,key:"mute_bucket_owner"},b("React").createElement(b("Image.react"),{src:g("407077")}),b("React").createElement("span",{className:"_65ki"},this.$2(this.props.storyOwnerName))));return b("React").createElement(b("CameraPostReportButton.react"),{threadID:this.props.threadID,contentReportFbt:this.$3(this.props.mediaType),onPopoverShow:this.props.onReportPopoverShow,onPopoverHide:this.props.onReportPopoverHide,onPopoverItemClick:this.props.onReportPopoverItemClick},a)};a.prototype.$1=function(a){a=a||"";if(!this.props.isUserStory)return null;switch(a.toUpperCase()){case"PHOTO":return i._("Delete Photo");case"VIDEO":return i._("Delete Video");default:return i._("Delete")}};a.prototype.$3=function(a){a=a||"";if(this.props.isOwnThread)return null;a=a||"";switch(a.toUpperCase()){case"PHOTO":return i._("Report Photo");case"VIDEO":return i._("Report Video");default:return i._("Report")}};a.prototype.$2=function(a){return i._("Mute {bucket_owner_name}",[i._param("bucket_owner_name",a)])};function a(){j.apply(this,arguments)}a.defaultProps={canMuteStoryOwner:!1,isStoryUploading:!1,isUserStory:!1,mediaType:"",onClickDelete:b("emptyFunction"),onClickMuteStoryOwner:b("emptyFunction"),onReportPopoverHide:b("emptyFunction"),onReportPopoverItemClick:b("emptyFunction"),onReportPopoverShow:b("emptyFunction"),storyOwnerName:"",threadID:""};e.exports=a}),null);
__d("FBStoriesCardWrappers.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){var c="_4tkv"+(a.isLandscape&&a.isLive?" _fxh":"")+" _24o3"+(a.isLive?" _2dnb":"");return b("React").createElement("div",{role:"tabpanel",tabIndex:0,ref:a.rootElemRef,className:c,onFocus:a.onFocus,onMouseOut:a.onMouseOut,onMouseMove:a.onMouseMove},b("React").createElement("div",{className:"_24o4",key:a.threadID},a.children),b("React").createElement("div",null,a.componentBelowCard))};c=function(a){return b("React").createElement("span",null,a.children)};d=function(a){return b("React").createElement("span",null,a.children)};f=function(a){return b("React").createElement("span",null,a.children)};g=function(a){return b("React").createElement("span",null,a.children)};e.exports={FBStoriesCard:a,FBStoriesCardHeader:c,FBStoriesCardFooter:d,FBStoriesCardOverlays:f,FBStoriesCardDialogs:g}}),null);
__d("FBStoriesDeleteConfirmationDialog.react",["cx","fbt","React","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=500;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){return b("React").createElement(b("XUIDialog.react"),{width:j,shown:this.props.shown,isStrictlyControlled:!0,onHide:this.props.hideAction},b("React").createElement(b("XUIDialogTitle.react"),null,this.$1(this.props.mediaType)),b("React").createElement(b("XUIDialogBody.react"),null,this.$2(this.props.mediaType)),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement("div",null,b("React").createElement(b("XUIDialogCancelButton.react"),{onClick:this.props.hideAction}),b("React").createElement(b("XUIDialogButton.react"),{action:"confirm",className:"_4jy1",label:h._("Delete"),onClick:this.props.confirmAction}))))};a.prototype.$2=function(a){a=a||"";switch(a.toUpperCase()){case"PHOTO":return h._("Delete this photo from your story?");case"VIDEO":return h._("Delete this video from your story?");default:return h._("Delete this from your story?")}};a.prototype.$1=function(a){a=a||"";switch(a.toUpperCase()){case"PHOTO":return h._("Delete Photo?");case"VIDEO":return h._("Delete Video?");default:return h._("Delete?")}};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesMuteConfirmationDialog.react",["cx","fbt","CameraPostTypes","React","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=500;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.$1=function(){switch(this.props.cameraPostType){case b("CameraPostTypes").PAGE_STORY:return h._("You'll stop seeing their story but can still see posts from this Page.");case b("CameraPostTypes").EVENT_STORY:return h._("You'll stop seeing this story but can still see event updates.");case b("CameraPostTypes").GROUP_STORY:return h._("You'll stop seeing this story but will stay in the group.")}return h._("You'll stop seeing their story but will remain friends.")};a.prototype.render=function(){return b("React").createElement(b("XUIDialog.react"),{width:j,shown:this.props.shown,isStrictlyControlled:!0,onHide:this.props.hideAction},b("React").createElement(b("XUIDialogTitle.react"),null,h._("Mute {bucket_owner_name}?",[h._param("bucket_owner_name",this.props.bucketOwnerName)])),b("React").createElement(b("XUIDialogBody.react"),null,this.$1()),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement("div",null,b("React").createElement(b("XUIDialogCancelButton.react"),{onClick:this.props.hideAction}),b("React").createElement(b("XUIDialogButton.react"),{action:"confirm",className:"_4jy1",label:h._("Mute"),onClick:this.props.confirmAction}))))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesOptimisticUploadLabel.react",["cx","fbt","React","XUISpinner.react","XUIText.react"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(){return b("React").createElement("div",{className:"_2m8x"},b("React").createElement(b("XUISpinner.react"),{className:"_2m8y",size:"large"})," ",b("React").createElement(b("XUIText.react"),{color:"primary",palette:"dark",size:"header4",weight:"normal"},h._("Uploading...")))};e.exports=a}),null);
__d("FBStoriesViewersAnchor.react",["ix","cx","fbt","React","Image.react","asset","emptyFunction","intlSummarizeNumber"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=j.constructor).call.apply(a,[this].concat(d)),this.$2=function(a){return this.$1=a}.bind(this),this.$3=function(){return this.$1}.bind(this),this.$4=function(a){a.stopPropagation();a.preventDefault();if(this.props.disabled)return;this.props.onClick()}.bind(this),b}a.prototype.render=function(){var a=this.props.totalViewers;if(a===0)return null;a=b("intlSummarizeNumber")(a);var c=this.props.color==="light"?g("380946"):g("404279");return b("React").createElement("div",{className:"_1w7c"+(this.props.color==="light"?" light":"")+(this.props.color==="dark"?" dark":"")+(this.props.disabled?" disabled":"")+(this.props.highlighted?" highlighted":""),ref:this.$2,onMouseDown:this.$4,onMouseUp:function(a){return a.stopPropagation()}},b("React").createElement(b("Image.react"),{src:c}),b("React").createElement("span",{className:"_2lc0"},this.props.showTotalViewerString?i._("Opened by {count}",[i._param("count",a)]):a))};a.defaultProps={onClick:b("emptyFunction"),color:"light",showTotalViewerString:!1,disabled:!1};e.exports=a}),null);
__d("XLiveVideoStoriesUIController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/live_video/stories/ui/",{video_id:{type:"FBID",required:!0}})}),null);
__d("FBStoriesLiveVideoAPI",["AsyncRequest","XLiveVideoStoriesUIController"],(function(a,b,c,d,e,f){"use strict";a={loadUIComponents:function(a){a=b("XLiveVideoStoriesUIController").getURIBuilder().setFBID("video_id",a).getURI();new(b("AsyncRequest"))().setURI(a).send()}};e.exports=a}),null);
__d("FBStoriesLiveVideoUIStore",["FBStoriesDispatcher","FBStoriesLiveVideoActionTypes","FBStoriesLiveVideoAPI","FBStoriesStore","FluxLoadObjectStore","immutable","LoadObject"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("FluxLoadObjectStore"));g&&g.prototype;a.prototype.reduce=function(a,c){switch(c.type){case b("FBStoriesLiveVideoActionTypes").SET_UI_COMPONENTS:b("FBStoriesDispatcher").waitFor([b("FBStoriesStore").getDispatchToken()]);return b("FBStoriesStore").getCurrentThreadMediaIDForSelectedBucket()===c.videoID?this.__handleOne(a,c.videoID,c.uiComponents):a;case b("FBStoriesLiveVideoActionTypes").REMOVE_UI_COMPONENTS:return this.__setEmpty(a,this.getState().keys());case b("FBStoriesLiveVideoActionTypes").LOAD_UI_COMPONENTS_FAILED:return this.__handleOne(a,c.videoID,new Error("Failed to load UI components"));default:return a}};a.prototype.__load=function(a){b("FBStoriesLiveVideoAPI").loadUIComponents(a)};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("FBStoriesDispatcher"))}),null);
__d("FBStoryLiveSidePane.react",["ix","cx","fbt","Arbiter","AsyncRequest","DOMContainer.react","Image.react","Link.react","NFXStoryLocation","PopoverMenu.react","React","ReactDOM","ReactXUIMenu","Style","SubscriptionsHandler","SutroPhase2GatingConfig","UFIUIEvents","XRapidReportingDialogController","XUINotice.react","XUISpinner.react","fbglyph","queryThenMutateDOM"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("ReactXUIMenu").Item,l=50,m=function(a){if(a.isOwnBucket)return null;var c=a.isLiveAudio?i._("Report live audio"):i._("Report live video");a=b("React").createElement(b("ReactXUIMenu"),null,b("React").createElement(k,{onclick:a.reportLiveVideo},c));return b("React").createElement(b("PopoverMenu.react"),{alignh:"right",className:"_1q41",menu:a},b("React").createElement(b("Link.react"),{href:"#","aria-label":i._("More")},b("React").createElement(b("Image.react"),{src:g("125399")})))};c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a){j.constructor.call(this,a),this.$7=function(a){this.$3=a}.bind(this),this.$8=function(){var a=this.props.liveVideoData;a=a&&a.media.id;a=JSON.stringify({reportable_ent_token:a,story_location:b("NFXStoryLocation").DIRECT_MESSAGING});a=b("XRapidReportingDialogController").getURIBuilder().setString("context",a).getURI();new(b("AsyncRequest"))().setURI(a).send()}.bind(this),this.$1=!1,this.$3=null,this.$4=0}a.prototype.componentDidMount=function(){this.$2=new(b("SubscriptionsHandler"))(),this.$2.addSubscriptions(b("Arbiter").subscribe(b("UFIUIEvents").Changed,function(a,b){a=this.props.uiComponents.getValue();a&&a.ufi===b.form&&this.$5()}.bind(this)),b("Arbiter").subscribe("pre_page_transition",function(){this.props.onDone()}.bind(this))),this.$1=!1,this.$5()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){if((a.isSelectedBucketLiveAndEnded||!a.liveVideoData)&&this.$3){a=this.$3.getDOMChild();this.$6(a)}};a.prototype.componentWillUnmount=function(){this.$2&&this.$2.release(),this.$1=!1};a.prototype.$6=function(a){for(var c=0;c<a.children.length;c++)this.$6(a.children[c]);b("ReactDOM").unmountComponentAtNode(a)};a.prototype.$5=function(){var a=this.props.uiComponents.getValue(),c=a?a.ufiScrollableArea:null;if(!c)return;var d=0;b("queryThenMutateDOM")(function(){d=parseFloat(b("Style").get(c,"height"))},function(){var a=this.$4-(c.scrollTop+d);(!this.$1||a<l)&&(c.scrollTop=c.scrollHeight,this.$1=!0);this.$4=c.scrollHeight}.bind(this))};a.prototype.render=function(){__p&&__p();var a=this.props.liveVideoData;if(!a||this.props.isSelectedBucketLiveAndEnded)return null;var c=void 0,d=this.props.uiComponents,e=d.getValue();d.getError()?c=b("React").createElement(b("XUINotice.react"),{className:"_3-8i",use:"recommend"},i._("Something went wrong, please try again.")):e?c=b("React").createElement(b("DOMContainer.react"),null,e.topSection):c=b("React").createElement("div",{className:"_2n_f"},b("React").createElement(b("XUISpinner.react"),{size:"large"}));var f=e?b("React").createElement(b("DOMContainer.react"),{className:"_4b4k _39yn",display:"block",ref:this.$7},e.ufi):null;e=e?b("React").createElement(b("DOMContainer.react"),null,e.reactionsMenu):null;a=a.media;var g=a.height<a.width;return b("React").createElement("div",null,b("React").createElement("div",{className:this.props.isCommercialBreakRunning?"_4dlh":""}),b("React").createElement("div",{className:"_3g-3"+(g?" _6291":"")+(this.props.isCommercialBreakRunning?" _4dlk":"")},b("React").createElement("div",{className:"_4b4l"},d.getError()?null:b("React").createElement(m,{isLiveAudio:a.is_live_audio_format,isOwnBucket:this.props.isOwnBucket,reportLiveVideo:this.$8}),c,f),b("React").createElement("div",{className:"_1dbt"},b("React").createElement("div",{className:"_1dbu"},e))))};e.exports=a}),null);
__d("FBStoryLiveSidePaneContainer.react",["FBStoriesDispatcher","FBStoriesLiveVideoUIStore","FBStoriesStore","FBStoryLiveSidePane.react","FluxContainer","LoadObject","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h={isCommercialBreakRunning:!1,isOwnBucket:!1,isSelectedBucketLiveAndEnded:!1,liveVideoData:null,uiComponents:b("LoadObject").empty()};c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){g.constructor.call(this),b("FBStoriesDispatcher").explicitlyRegisterStores([b("FBStoriesLiveVideoUIStore")])}a.getStores=function(){return[b("FBStoriesStore"),b("FBStoriesLiveVideoUIStore")]};a.calculateState=function(a){a=b("FBStoriesStore").getThreadDataForSelectedLiveBucket();if(!a)return h;var c=b("FBStoriesStore").isOwnBucket(),d=b("FBStoriesStore").isSelectedBucketLiveAndEnded(),e=a.media.id,f=b("FBStoriesLiveVideoUIStore").get(e);e=b("FBStoriesStore").getIsCommercialBreakRunning(e);return{isOwnBucket:c,isSelectedBucketLiveAndEnded:d,liveVideoData:a,uiComponents:f,isCommercialBreakRunning:e}};a.prototype.render=function(){return b("React").createElement(b("FBStoryLiveSidePane.react"),babelHelpers["extends"]({},this.props,this.state))};e.exports=b("FluxContainer").create(a)}),null);
__d("FBStoriesPollResults.react",["cx","fbt","React","intlSummarizeNumber"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){if(!this.props.poll)return null;var a=this.props.poll.poll_options;a=a.map(function(a,c){return b("React").createElement("div",{className:"_4k6j",key:c},b("React").createElement("div",{className:"_4k6k"},b("intlSummarizeNumber")(a.vote_count)),b("React").createElement("div",{className:"_4k6l"},h._("Votes for {poll option title}",[h._param("poll option title",a.text.toUpperCase())])))});return b("React").createElement("div",{className:"_4k6i"},a)};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("FBStorySidePaneSection.react",["cx","Image.react","React","ProfileLink.react","idx","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=this.props.data.map(function(a,c){return b("React").createElement("div",{key:a.id,className:"_2lc3"},b("React").createElement(b("Image.react"),{src:(c=a)!=null?(c=c.profile_picture)!=null?c.uri:c:c,className:"_2lc4"}),a.is_messenger_only?b("React").createElement("span",{className:"_2lc6"},a.name):b("React").createElement(b("ProfileLink.react"),{target:"_blank",uid:a.id},a.name),b("React").createElement(i,{poll:this.props.poll,optionIndex:a.votedPollOptionIndex}),a.isNewViewer&&b("React").createElement(j,null))}.bind(this));return b("React").createElement("div",{className:"_1w76"},a,this.props.children)};function a(){h.apply(this,arguments)}var i=function(a){var c=a.optionIndex;if(!a.poll||c===undefined||c<0)return null;a=((a=a.poll)!=null?a.poll_options:a)||[];if(b("gkx")("AT5cY453UIn7IBnt5c7XbyCNhd_HeWDibJFNF6e75qjAJvsze1NwxYgpgf2CZHkviKs83iEmyc4PsHNtw7GZiVfz")&&a&&a[c]){a=a[c].text;return!a?null:b("React").createElement("div",{className:"_2c_y"},a.toUpperCase())}return null},j=function(a){return b("React").createElement("span",{className:"_2lc9"})};e.exports=a}),null);
__d("FBStorySidePaneSectionHeader.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_1w73"},this.props.children)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FBStorySidePaneSectionPadding.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_3res"})};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FBStoryThreadViewers.react",["ix","cx","fbt","CameraPostTypesHelper","FBStoriesPollResults.react","FBStoriesViewersAnchor.react","FBStorySidePaneSection.react","FBStorySidePaneSectionHeader.react","FBStorySidePaneSectionPadding.react","React","Image.react","XUISpinner.react","asset","gkx","idx","intlSummarizeNumber"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=function(a){__p&&__p();if(!a||a.length===0)return null;if(b("gkx")("AT5cY453UIn7IBnt5c7XbyCNhd_HeWDibJFNF6e75qjAJvsze1NwxYgpgf2CZHkviKs83iEmyc4PsHNtw7GZiVfz")){a=a.find(function(a){return a.__typename==="StoryOverlayPollSticker"});if(a&&a.__typename==="StoryOverlayPollSticker"){return(a=a)!=null?a.poll:a}}return null};a=function(a){__p&&__p();var c=a.viewers,d=c.totalCount,e=c.totalNew,f=c.friends,g=c.connections,h=c.nonFriendsCount;c=c.hasNewViewers;var n=a.cameraPostType;if(d===0)return b("React").createElement("div",null,b("React").createElement(b("XUISpinner.react"),{background:"light",className:"_1v68",size:"small"}));var o=b("gkx")("AT68VoO3FI8o9GetHQwJE3EDQKJcCxhu0nvhhfnwVsWYBpvSxs_UTrJX8fDUKntszXsGY50tl9YqFW-jL2vVKYjO")&&g.length>0,p=h>0;e=b("intlSummarizeNumber")(e);a=j(a.threadOverlays);d=b("React").createElement(b("FBStorySidePaneSectionHeader.react"),null,b("React").createElement(b("FBStoriesViewersAnchor.react"),{totalViewers:d,highlighted:!1,color:"dark",showTotalViewerString:!0}),c&&b("React").createElement("div",{className:"_1wbm"},i._("{count} New",[i._param("count",e)])));c=o?b("React").createElement(m,null,b("React").createElement("div",{className:"_3kqi"},i._("Connections"))):p?b("React").createElement(b("FBStorySidePaneSectionPadding.react"),null):null;e=b("React").createElement(b("FBStorySidePaneSection.react"),{data:g,poll:a},p&&b("React").createElement(l,{nonFriendsCount:h,isMultiAuthor:b("CameraPostTypesHelper").isMultiAuthor(n)}));g=o&&b("React").createElement("div",{className:"_1w74"},i._("Learn more about {=Messenger connections}",[i._param("=Messenger connections",b("React").createElement("a",{href:"https://www.facebook.com/help/messenger-app/122070095126335",target:"_blank"},i._("Messenger connections")))]));return b("React").createElement("div",{className:"_434n"},d,b("React").createElement(b("FBStoriesPollResults.react"),{poll:a}),b("React").createElement("div",{className:"_434o"},b("React").createElement(k,{friendsData:f,poll:a}),c,e,g))};var k=function(a){var c=b("React").createElement(m,{key:"fh"},b("React").createElement("div",{className:"_3kqi"},i._("Friends")));return a.friendsData.length===0?[c,b("React").createElement("div",{key:"fnull",className:"_2lc3"},b("React").createElement("div",{className:"_2flc"},b("React").createElement(b("Image.react"),{src:g("359067")})),b("React").createElement("span",{className:"_2fld"},i._("When friends open your story they'll show up here")))]:[c,b("React").createElement(b("FBStorySidePaneSection.react"),{key:"fs",data:a.friendsData,poll:a.poll})]},l=function(a){var c=a.isMultiAuthor?i._("Others"):i._("Followers");a=b("intlSummarizeNumber")(a.nonFriendsCount);return b("React").createElement("div",{className:"_2lc3"},b("React").createElement("div",{className:"_1wbp"},a),b("React").createElement("span",{className:"_1wbo"},c))},m=function(a){return b("React").createElement("div",{className:"_1w73 _1w77"},a.children)};e.exports=a}),null);
__d("SegmentedProgressBar.react",["cx","range","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=this.props,c=a.currentSegmentIndex,d=a.currentSegmentPercentComplete;a=a.segmentCount;a=b("range")(0,a).map(function(a){var e=0;a<c?e=100:a>c?e=0:e=d;return b("React").createElement(j,{current:a===c,key:a,percentDone:e})});return b("React").createElement("div",{className:"_jxz"},a)};function a(){h.apply(this,arguments)}i=babelHelpers.inherits(j,b("React").Component);i&&i.prototype;j.prototype.render=function(){var a=this.props.percentDone;a={width:a+"%"};return b("React").createElement("div",{className:"_jx-"},b("React").createElement("div",{className:"_jx_",style:a}))};function j(){i.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesViewerCard.react",["cx","fbt","CameraPostBucketOwnerHelper","CameraPostGraphQLAPI","CameraPostMediaHelper","CameraPostMuteButton.react","CameraPostOwnerView.react","CameraPostSendingToast.react","CameraPostSendReply.react","Event","FBStoriesActions","FBStoriesCardMedia.react","FBStoriesCardOptionsButton.react","FBStoriesCardWrappers.react","FBStoriesDeleteConfirmationDialog.react","FBStoriesLoggingHelper","FBStoriesMuteConfirmationDialog.react","FBStoriesOptimisticUploadLabel.react","FBStoriesViewersAnchor.react","FBStoryLiveSidePaneContainer.react","FBStoryThreadViewers.react","Keys","Locale","React","SegmentedProgressBar.react","createCancelableFunction","emptyFunction","getActiveElement","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("FBStoriesCardWrappers.react").FBStoriesCard,k=b("FBStoriesCardWrappers.react").FBStoriesCardHeader,l=b("FBStoriesCardWrappers.react").FBStoriesCardFooter,m=b("FBStoriesCardWrappers.react").FBStoriesCardOverlays,n=b("FBStoriesCardWrappers.react").FBStoriesCardDialogs,o=.3,p=500,q=500,r=Object.freeze({NEXT:"next",PREV:"prev",STAY_HERE:"stay_here"}),s=1e3;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={isDeleteConfirmationDialogShown:!1,isMuteConfirmationDialogShown:!1,isPaused:!1,isReplyFocused:!1,isShowingSendingToast:!1,isViewersPanelShown:!1,navDirectionOnClick:r.STAY_HERE,showPausedOverlay:!1,showStoryUI:!0},this.$48=function(){this.setState({isDeleteConfirmationDialogShown:!0})}.bind(this),this.$39=function(){this.setState({isDeleteConfirmationDialogShown:!1})}.bind(this),this.$38=function(){this.setState({isDeleteConfirmationDialogShown:!1}),this.$57()}.bind(this),this.$49=function(){this.setState({isMuteConfirmationDialogShown:!0})}.bind(this),this.$42=function(){this.setState({isMuteConfirmationDialogShown:!1})}.bind(this),this.$41=function(){this.setState({isMuteConfirmationDialogShown:!1}),this.props.onMuteBucketOwner()}.bind(this),this.$55=function(a){this.$10(),this.setState({isReplyFocused:!1})}.bind(this),this.$54=function(a){this.$37(!1,!0),this.setState({isReplyFocused:!0})}.bind(this),this.$28=function(event){this.$1=event.target}.bind(this),this.$34=function(a){if(this.state.isPaused)return;clearTimeout(this.$5);this.$5=setTimeout(function(){this.$37(!0,!1)}.bind(this),q)}.bind(this),this.$30=function(a){var c=a.currentTarget.offsetWidth;a=a.nativeEvent.offsetX;var d=o*c;b("Locale").isRTL()&&(a=c-a);a>=0&&a<=d?this.setState({navDirectionOnClick:r.PREV}):a>=c-d&&a<=c?this.setState({navDirectionOnClick:r.NEXT}):this.setState({navDirectionOnClick:r.STAY_HERE})}.bind(this),this.$35=function(a){__p&&__p();clearTimeout(this.$5);if(a.target.tagName==="INPUT")return;if(this.state.isPaused)this.$10(),this.state.isReplyFocused&&this.setState({isReplyFocused:!1});else{if(!this.props.enableNavigation)return;if(a.target.className!=="_ide")return;this.state.navDirectionOnClick===r.PREV?this.$45():this.state.navDirectionOnClick===r.NEXT&&!this.state.isLastThread&&this.$44()}}.bind(this),this.$29=function(event){this.state.isPaused&&this.setState({showPausedOverlay:!0})}.bind(this),this.$15=function(a){a!==this.$8&&(a&&(b("Event").listen(a,"keydown",function(event){return this.$58(event)}.bind(this),b("Event").Priority.URGENT),b("Event").listen(a,"keyup",function(event){return this.$59(event)}.bind(this),b("Event").Priority.URGENT),a.focus())),this.$8=a}.bind(this),this.$12=b("createCancelableFunction")(function(){this.setState({isShowingSendingToast:!1})}.bind(this)),this.$53=function(a){__p&&__p();if(a!==""){var c=this.props.currentThreadData;if(!c||c.isLive)return;var d=c.threadID;c=c.cameraPostType;var e=this.props.userInfo.userID;this.$60();this.$10();this.setState({isReplyFocused:!1});b("promiseDone")(b("CameraPostGraphQLAPI").sendDirectMessageReply(e,d,a,c,!0))}}.bind(this),this.$11=b("createCancelableFunction")(function(a){this.setState({isShowingSendingToast:!0},function(){this.$9=setTimeout(function(){this.$9=undefined,this.$12()}.bind(this),a)}.bind(this))}.bind(this)),this.$52=function(){this.$6=!0,this.$37(!1,!1)}.bind(this),this.$51=function(){!this.$6&&!this.state.isReplyFocused&&!this.state.isViewersPanelShown&&this.$10(),this.$6=!1,this.$7=!1}.bind(this),this.$50=function(){this.$37(!1,!0),this.$7=!0}.bind(this),this.$33=function(){this.props.isBucketLive||this.$44()}.bind(this),this.$40=function(){var a=!this.state.isViewersPanelShown;this.setState({isViewersPanelShown:a});a&&b("FBStoriesLoggingHelper").openSeenSummaryLog();this.$7||(a?this.$37(!1,!0):this.$10())}.bind(this),c}a.prototype.componentDidMount=function(){b("FBStoriesLoggingHelper").openMediaLog()};a.prototype.componentDidUpdate=function(){var a=b("getActiveElement")();!this.state.isReplyFocused&&this.$8&&!this.props.isBucketLive&&(!this.$1||this.$1===a&&a.tagName!=="A"&&a.tagName!=="BUTTON")&&this.$8.focus()};a.prototype.componentWillUnmount=function(){this.$10(),this.$4&&this.$4.cancel(),this.$3&&this.$3.cancel(),this.$11.cancel(),this.$12.cancel()};a.prototype.UNSAFE_componentWillUpdate=function(a,c){!this.props.allBucketsViewed&&a.allBucketsViewed&&a.onDone(),this.props.bucketID!==a.bucketID?this.setState(this.$13()):this.props.currentThreadIndex!==a.currentThreadIndex&&this.$14(),a.currentThreadID!==this.props.currentThreadID&&(a.currentThreadID||a.isBucketLive)&&b("FBStoriesLoggingHelper").openMediaLog()};a.prototype.render=function(){var a="_4tkv"+(this.props.isLandscape&&this.props.isBucketLive?" _fxh":"")+" _24o3"+(this.props.isBucketLive?" _2dnb":"");if(!this.props.currentThreadData)return b("React").createElement("div",{role:"tabpanel",tabIndex:-1,ref:this.$15,className:a});a=this.$16();var c=this.$17(),d=this.$18(),e=this.$19(),f=this.$20(),g=this.$21(),h=this.$22(),i=this.$23(),o=this.$24(),p=this.$25(),q=this.$26(),r=this.$27();r=b("React").createElement("span",null,b("React").createElement(j,{componentBelowCard:r,isLandscape:this.props.isLandscape,isLive:this.props.isBucketLive,rootElemRef:this.$15,onFocus:this.$28,onMouseOut:this.$29,onMouseMove:this.$30,threadID:this.props.currentThreadID},b("React").createElement(b("React").Fragment,null,a,b("React").createElement(k,null,b("React").createElement(b("React").Fragment,null,c,d,e,f)),b("React").createElement(l,null,g),b("React").createElement(m,null,b("React").createElement(b("React").Fragment,null,h,i)),b("React").createElement(n,null,b("React").createElement(b("React").Fragment,null,o,p,q)))));if(this.props.isBucketLive)return this.$31(r);return this.props.isOwnThread?this.$32(r):r};a.prototype.$17=function(){__p&&__p();var a=this.props.currentThreadData;if(!a)return null;if(!a.isLive&&this.state.showStoryUI){var c=a.bucketOwner,d=a.cameraPostSource,e=a.cameraPostType,f=a.participants,g=a.threadOwner,h=a.time;a=a.originalPostStoryAttribution;var i=this.props.currentThreadID;return b("React").createElement(b("CameraPostOwnerView.react"),{bucketOwner:c,cameraPostSource:d,cameraPostType:e,participants:f,threadID:i,threadOwner:g,time:h,originalPostStoryAttribution:a})}return null};a.prototype.$16=function(){__p&&__p();var a=this.props.currentThreadData;if(!a)return null;var c=a.cameraPostType,d=a.media,e=this.props.currentThreadID,f=this.props.userInfo.userID,g=void 0;if(!a.isLive){var h=a.messageText;a=a.wwwTextFormatMetadata;g={rootMessageText:h||"",wwwTextFormatMetadata:a}}return b("React").createElement(b("React").Fragment,null,b("React").createElement(b("FBStoriesCardMedia.react"),{cameraPostType:c,isBucketLive:this.props.isBucketLive,isMediaMuted:this.props.isStoryMuted,media:d,onDone:this.$33,onMouseDown:this.$34,onMouseUp:this.$35,onTimeUpdate:this.$36,onVideoPaused:function(){this.state.isPaused||this.$37(!1,!0)}.bind(this),paused:this.state.isPaused,satpData:g,threadID:e,userID:f}))};a.prototype.$24=function(){var a=this.props.currentThreadData;if(!a)return null;a=a.media;a=b("CameraPostMediaHelper").getType(a);return b("React").createElement(b("FBStoriesDeleteConfirmationDialog.react"),{confirmAction:this.$38,hideAction:this.$39,mediaType:a,shown:this.state.isDeleteConfirmationDialogShown})};a.prototype.$21=function(){if(this.props.isStoryUploading)return b("React").createElement(b("FBStoriesOptimisticUploadLabel.react"),null);if(this.props.isThreadReviewStatusPending)return b("React").createElement("span",{className:"_449_"},h._("Pending Admin Approval"));return this.props.isOwnThread&&this.state.showStoryUI&&!this.props.isBucketLive?b("React").createElement(b("FBStoriesViewersAnchor.react"),{totalViewers:this.props.threadViewers.totalCount,highlighted:this.props.threadViewers.hasNewViewers,onClick:this.$40,disabled:!1,color:"light"}):null};a.prototype.$18=function(){var a=!this.props.isSelectedBucketLiveAndEnded;return!a||!this.state.showStoryUI?null:b("React").createElement(b("CameraPostMuteButton.react"),{muted:this.props.isStoryMuted,onMouseUp:this.props.onClickMute})};a.prototype.$25=function(){var a=this.props.currentThreadData;if(!a)return null;var c=a.bucketOwner;a=a.cameraPostType;c=b("CameraPostBucketOwnerHelper").getName(c);return b("React").createElement(b("FBStoriesMuteConfirmationDialog.react"),{bucketOwnerName:c,cameraPostType:a,confirmAction:this.$41,hideAction:this.$42,shown:this.state.isMuteConfirmationDialogShown})};a.prototype.$43=function(a){__p&&__p();if(!this.state.showStoryUI||this.state.showPausedOverlay)return null;if(!this.props.enableNavigation)return null;var c=this.props.allowedNavType==="PREV_ONLY"&&a===r.NEXT,d=this.props.allowedNavType==="NEXT_ONLY"&&a===r.PREV;if(d||c)return null;d=function(b){b.preventDefault(),b.stopPropagation(),this.$8.focus(),a===r.NEXT?this.$44():this.$45()}.bind(this);c=function(b){b.stopPropagation(),this.setState({navDirectionOnClick:a})}.bind(this);return b("React").createElement("button",{"aria-label":a===r.NEXT?h._("Next Button"):a===r.PREV?h._("Previous Button"):h._("Button"),className:"_24o5"+(a===r.NEXT?" _24o8":"")+(a===r.PREV?" _24o7":"")+(this.state.navDirectionOnClick===a?" _24o6":""),onClick:d,onMouseMove:c,tabIndex:0})};a.prototype.$22=function(){var a=this.$43(r.PREV),c=this.$43(r.NEXT);return b("React").createElement(b("React").Fragment,null,a,c)};a.prototype.$19=function(){__p&&__p();var a=this.props.currentThreadData;if(!a)return null;if(!a.isLive&&this.state.showStoryUI){var c=a.bucketOwner,d=a.media;a=a.threadID;c=b("CameraPostBucketOwnerHelper").getName(c);d=b("CameraPostMediaHelper").getType(d);return b("React").createElement(b("FBStoriesCardOptionsButton.react"),{canMuteStoryOwner:this.$46(),isUserStory:this.$47(),isStoryUploading:this.props.isStoryUploading,mediaType:d,onClickDelete:this.$48,onClickMuteStoryOwner:this.$49,storyOwnerName:c,threadID:a,onPopoverShow:this.$50,onPopoverHide:this.$51,onPopoverItemClick:this.$52})}return null};a.prototype.$23=function(){return!this.state.showPausedOverlay?null:b("React").createElement("div",{className:"_ida"},b("React").createElement("span",{className:"_idd"}))};a.prototype.$20=function(){var a=this.props.currentThreadData;if(!a)return null;return a.isLive||!this.state.showStoryUI?null:b("React").createElement(b("SegmentedProgressBar.react"),{paused:this.state.isPaused,currentSegmentIndex:this.props.currentThreadIndex,currentSegmentPercentComplete:this.props.currentThreadPercentDone,segmentCount:this.props.threadsCount})};a.prototype.$27=function(){if(this.props.shouldDisableReply)return null;var a=this.props.currentThreadData;if(!a)return null;a=a.cameraPostType;var c=this.props.currentThreadID,d=this.props.userInfo,e=d.userID,f=d.userName;d=d.userProfilePic;return b("React").createElement(b("CameraPostSendReply.react"),{cameraPostType:a,replyProfileName:f,replyProfilePic:d,userID:e,threadID:c,focused:this.state.isReplyFocused,onReplyEntered:this.$53,onFocusInput:this.$54,onBlurInput:this.$55})};a.prototype.$26=function(){return!this.state.isShowingSendingToast?null:b("React").createElement(b("CameraPostSendingToast.react"),null)};a.prototype.$56=function(){if(!this.state.isViewersPanelShown)return null;var a=this.props.currentThreadData;if(!a)return null;a=a.cameraPostType;return b("React").createElement("div",{className:"_397_"},b("React").createElement(b("FBStoryThreadViewers.react"),{cameraPostType:a,viewers:this.props.threadViewers}))};a.prototype.$31=function(a){return b("React").createElement("div",{className:"_272r"},a,b("React").createElement(b("FBStoryLiveSidePaneContainer.react"),{onDone:this.props.onDone}))};a.prototype.$32=function(a){var c=this.$56();return b("React").createElement("div",{className:"_272r"},c,a)};a.prototype.$47=function(){return this.props.isUserManagedThread};a.prototype.$57=function(){this.$37(!1,!1);b("FBStoriesLoggingHelper").deleteMediaLog();var a=this.props.currentThreadID,c=this.props.bucketID;a&&c&&this.$47()&&this.props.onDeleteCurrentThread();this.$10()};a.prototype.$58=function(event){__p&&__p();if(event.getModifiers().any||this.state.isReplyFocused||event.target!==this.$8||!this.props.enableNavigation)return!0;var a=b("Event").getKeyCode(event);switch(a){case b("Keys").LEFT:b("Locale").isRTL()?this.$44():this.$45();return!1;case b("Keys").RIGHT:b("Locale").isRTL()?this.$45():this.$44();return!1;default:a=String.fromCharCode(a);a.match(/\w/)&&this.setState({isReplyFocused:!0})}return null};a.prototype.$59=function(event){if(event.getModifiers().any||this.state.isReplyFocused||event.target!==this.$8)return!0;var a=b("Event").getKeyCode(event);switch(a){case b("Keys").SPACE:if(this.$7||this.state.isViewersPanelShown)return!1;!this.state.isPaused?this.$37(!1,!0):this.$10();return!1;default:return null}};a.prototype.$13=function(){return{isDeleteConfirmationDialogShown:!1,isMuteConfirmationDialogShown:!1,isPaused:!1,isReplyFocused:!1,isShowingSendingToast:!1,isViewersPanelShown:!1,navDirectionOnClick:r.STAY_HERE,showPausedOverlay:!1,showStoryUI:!0}};a.prototype.$14=function(){var a=this.props.currentThreadData;if(!a)return;this.setState({isPaused:!1,showPausedOverlay:!1,showStoryUI:!0})};a.prototype.$46=function(){return!this.props.isUserManagedBucket};a.prototype.$44=function(){this.props.onNextThread()};a.prototype.$45=function(){this.props.onPrevThread()};a.prototype.$37=function(a,b){this.setState({isPaused:!0,showStoryUI:!0,showPausedOverlay:b}),a&&(clearTimeout(this.$2),this.$2=setTimeout(function(){this.setState({showStoryUI:!1})}.bind(this),p))};a.prototype.$10=function(){clearTimeout(this.$5),clearTimeout(this.$2),this.setState({isPaused:!1,showPausedOverlay:!1,showStoryUI:!0,isViewersPanelShown:!1})};a.prototype.$60=function(){this.$11(s)};a.prototype.$36=function(a){b("FBStoriesActions").updateCurrentThreadPercentDone(a)};a.defaultProps={allowedNavType:"NEXT_ONLY",currentThreadPercentDone:0,enableNavigation:!0,isBucketLive:!1,isLandscape:!1,isSelectedBucketLiveAndEnded:!1,isStoryMuted:!1,isStoryUploading:!1,isThreadReviewStatusPending:!1,isUserManagedBucket:!1,isUserManagedThread:!1,onClickMute:b("emptyFunction"),onDeleteCurrentThread:b("emptyFunction"),onDone:b("emptyFunction"),onMuteBucketOwner:b("emptyFunction"),onNextThread:b("emptyFunction"),onPrevThread:b("emptyFunction"),shouldDisableReply:!1};e.exports=a}),null);
__d("FBStoriesExternalSong.react",["ix","cx","fbt","gkx","Image.react","Link.react","FBStoriesInteractiveLoggingHelper","React","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.linkClicked=function(){b("FBStoriesInteractiveLoggingHelper").log({action_detail:"external_song_button_click",link_type:this.props.overlay.song_data.platform_name,link_url:this.props.overlay.song_data.canonical_uri,thread_id:this.props.currentThreadID})}.bind(this),c}a.prototype.render=function(){__p&&__p();if(!this.props.overlay.song_data||!b("gkx")("AT4x5Rjx3ZVNm9vSGc35UI4LKQpmyUSH5IIjgRHH2wfsRfXNqvcAq7U7qEkGdcvZn8pNCpgEND7xS5ScnEPnX3ab"))return null;var a=i._("Listen on {partnerName}",[i._param("partnerName",this.props.overlay.song_data.platform_name)]),c=null;switch(this.props.overlay.song_data.platform_name){case"Spotify":a=i._("Play on {partnerName}",[i._param("partnerName",this.props.overlay.song_data.platform_name)]);c=b("React").createElement(b("Image.react"),{className:"_3-_y _3-8_",src:g("506051")});break;case"iTunes":a=i._("Get it on iTunes");break}var d=this.props.overlay.link_bounds.y*100;d={top:d+"%"};return b("React").createElement(b("Link.react"),{className:"_3vp6",href:this.props.overlay.song_data.canonical_uri,label:a,onClick:this.linkClicked,style:d,target:"_blank"},c,a)};e.exports=a}),null);
__d("FBStoriesPollStickerConstants",[],(function(a,b,c,d,e,f){"use strict";a=12;b={HEIGHT:72,WIDTH:240,DEFAULT_OPTION_WIDTH:120,AVAILABLE_WIDTH:240-2*a,TEXT_SMALL_HEIGHT:25,TEXT_BIG_HEIGHT:40,TEXT_BIG_MIN_FONT_SIZE:20,TEXT_BIG_MAX_FONT_SIZE:30,TEXT_SMALL_MIN_FONT_SIZE:12,TEXT_SMALL_MAX_FONT_SIZE:20,VOTE_OPTION_MAX_WIDTH_RATIO:.75,MINIMUM_LABEL_WIDTH:.31*240,H_PADDING:a};c={VOTING:"VOTING",JUST_VOTED:"JUST_VOTED",RESULTS:"RESULTS"};e.exports={DIMENSIONS:b,VOTING_PHASES:c}}),null);
__d("Autosize.react",["cx","Autosize","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",{style:{height:"auto",width:this.props.width?this.props.width+"px":"auto"},className:"_1obl invisible_elem",ref:function(a){return this.$1=a}.bind(this)},this.props.children)};a.prototype.componentDidMount=function(){new(b("Autosize"))(this.$1,babelHelpers["extends"]({},this.props)),requestAnimationFrame(function(){return b("Autosize").onNodeInserted()})};a.prototype.componentDidUpdate=function(a){new(b("Autosize"))(this.$1,babelHelpers["extends"]({},this.props)).fit()};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesPollStickerOptionLabel.react",["cx","Autosize.react","FBStoriesPollStickerConstants","React","range"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("FBStoriesPollStickerConstants").DIMENSIONS;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=this.props.voteCountPercent,c=a!==undefined&&a!==null,d=this.$1(c),e=i.VOTE_OPTION_MAX_WIDTH_RATIO*100,f="_2iz1"+(this.props.isResultView?" resultView":"")+(this.props.isSelected?" selected":"")+(this.props.isOverflowedOption?" overflow_option":"")+(c?" hasPercent":""),g=this.props.isOverflowLayout?i.DEFAULT_OPTION_WIDTH*i.VOTE_OPTION_MAX_WIDTH_RATIO:d.width,h={};a={width:g,height:d.height,zIndex:a!==undefined&&a!==null?a<=50?1:0:0};this.props.isOverflowLayout?(h.maxWidth=g,a.width="auto"):h.maxWidth=e+"%";e={width:a.width,zIndex:a.zIndex};var j=c?i.TEXT_SMALL_MIN_FONT_SIZE:i.TEXT_BIG_MIN_FONT_SIZE,k=c?i.TEXT_SMALL_MAX_FONT_SIZE:i.TEXT_BIG_MAX_FONT_SIZE;return b("React").createElement("div",{className:f,style:h},b("React").createElement("div",{className:"_2i_3",style:a},b("React").createElement(b("Autosize.react"),{sizes:b("range")(j,k+1,2),width:g,height:d.height},this.props.text.toUpperCase())),c&&b("React").createElement("div",{className:"_66ry",style:e},(this.props.voteCountPercent||0)+"%"))};a.prototype.$1=function(a){var b=(this.props.voteCountPercent||50)/100;b=Math.floor(i.AVAILABLE_WIDTH*b*i.VOTE_OPTION_MAX_WIDTH_RATIO);a=a?i.TEXT_SMALL_HEIGHT:i.TEXT_BIG_HEIGHT;return{width:b,height:a}};function a(){h.apply(this,arguments)}a.defaultProps={voteCountPercent:undefined,isSelected:!1,isResultView:!1,isOverflowLayout:!1,isOverflowedOption:!1};e.exports=a}),null);
__d("FBStoriesPollStickerOption.react",["cx","FBStoriesPollStickerOptionLabel.react","React","ShimButton.react","ReactMotion","FBStoriesPollStickerConstants"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("ReactMotion").Motion,j=b("ReactMotion").spring,k=b("ReactMotion").presets;c=b("FBStoriesPollStickerConstants").DIMENSIONS;var l=b("FBStoriesPollStickerConstants").VOTING_PHASES,m=c.DEFAULT_OPTION_WIDTH+"px",n=c.AVAILABLE_WIDTH;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){__p&&__p();if(this.props.votingPhase===l.VOTING)return b("React").createElement(b("ShimButton.react"),{className:"_1jl5 _66l8 voting"+(this.props.isSelected?" selected":""),onClick:this.props.onSelect,style:{width:m}},b("React").createElement(b("FBStoriesPollStickerOptionLabel.react"),{isSelected:this.props.isSelected,isOverflowLayout:this.props.isOverflowLayout,isOverflowedOption:this.props.isOverflowedOption,text:this.props.text}));else if(this.props.votingPhase===l.RESULTS)return b("React").createElement("div",{className:"_1jl5 _66l8 results"+(this.props.isConsumer?" consumer":"")+(this.props.isSelected?" selected":"")+(this.props.isOverflowLayout?" overflow":"")+(this.props.isOverflowedOption?" overflow_option":""),style:{width:this.props.width}},b("React").createElement(b("FBStoriesPollStickerOptionLabel.react"),{isResultView:!this.props.isConsumer,isSelected:this.props.isSelected,isOverflowLayout:this.props.isOverflowLayout,isOverflowedOption:this.props.isOverflowedOption,text:this.props.text,voteCountPercent:this.props.voteCountPercent}));else{var a=this.props.isLeftOption&&this.props.isSelected||!this.props.isLeftOption&&!this.props.isSelected;a=a?0:n;var c=this.props.isLeftOption?this.props.width:Math.abs(this.props.width-n);a=this.props.isLeftOption?a:Math.abs(n-a);c=this.props.isLeftOption?c:Math.abs(n-c);return b("React").createElement(i,{defaultStyle:{width:a},style:{width:j(c,babelHelpers["extends"]({},k.noWobble))}},function(a){return b("React").createElement("div",{className:"_1jl5 _66l8 justVoted"+(this.props.isSelected?" selected":"")+(this.props.isOverflowLayout?" overflow":"")+(this.props.isOverflowedOption?" overflow_option":""),style:a},b("React").createElement(b("FBStoriesPollStickerOptionLabel.react"),{isSelected:this.props.isSelected,isOverflowLayout:this.props.isOverflowLayout,isOverflowedOption:this.props.isOverflowedOption,text:this.props.text,voteCountPercent:this.props.voteCountPercent}))}.bind(this))}};function a(){h.apply(this,arguments)}a.defaultProps={animateIn:!1,isConsumer:!0,isSelected:!1,votingPhase:l.VOTING,isOverflowLayout:!1,isOverflowedOption:!1,isLeftOption:!1,voteCountPercent:undefined};e.exports=a}),null);
__d("FBStoriesPollSticker.react",["cx","FBStoriesPollStickerConstants","FBStoriesPollStickerOption.react","React","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("FBStoriesPollStickerConstants").VOTING_PHASES,j=b("FBStoriesPollStickerConstants").DIMENSIONS;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={didVoteChange:!1},b}a.prototype.render=function(){var a=this.$1();return b("React").createElement("div",{className:"_4gto"},a)};a.prototype.$2=function(a){if(!this.props.canViewerVote)return;this.props.onOptionVoted&&this.props.onOptionVoted(this.props.pollId,a);this.setState({didVoteChange:!0})};a.prototype.$3=function(){return this.props.pollOptions.filter(function(a){return a.voteCount>0}).length===1};a.prototype.$1=function(){var a=this.$4(),c=a.findIndex(function(a){return a.width<=j.MINIMUM_LABEL_WIDTH});return a.map(function(a,d){return b("React").createElement(b("FBStoriesPollStickerOption.react"),babelHelpers["extends"]({},a,{isLeftOption:d===0,isOverflowLayout:c>=0,isOverflowedOption:c===d}))})};a.prototype.$4=function(){__p&&__p();var a=this.props,b=a.pollOptions,c=a.viewerVoteIndex,d=a.canViewerVote,e=a.isConsumer,f=b.reduce(function(a,b){return a+=b.voteCount},0);a=c!==undefined&&c!==null&&c>=0;a=e?!a&&d:f===0;var g=!a&&!this.state.didVoteChange,h=!a&&this.state.didVoteChange,k=0;return b.reduce(function(a,d,l){__p&&__p();var m=d.text;d=d.voteCount;var n=this.$3();n=l===c||n;if((g||h)&&d===0)return a;var o=undefined,p=j.DEFAULT_OPTION_WIDTH,q=i.VOTING,r=!1;if(g||h){g?q=i.RESULTS:h&&(q=i.JUST_VOTED);r=n;if(l===b.length-1)o=100-k;else{n=d/f;o=n*100;d=Math.round(o)!=o;n=o<.1;d=d?o.toFixed(n?1:0):o;o=parseFloat(d);k+=o}p=j.WIDTH*(o/100)}a.push({animateIn:this.state.didVoteChange,key:l,isConsumer:e,isSelected:r,votingPhase:q,onSelect:function(){return this.$2(l)}.bind(this),text:m,voteCountPercent:o,width:p});return a}.bind(this),[])};a.defaultProps={top:0,left:0,rotation:0,scaleX:1,scaleY:1,canViewerVote:!0,viewerVoteIndex:undefined,isConsumer:!0,onOptionVoted:b("emptyFunction")};e.exports=a}),null);
__d("StoryOverlayPollStyle",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TWO_OPTION_COMBINED:"two_option_combined",IG_TWO_OPTION_COMBINED:"ig_two_option_combined",FIVE_OPTION_STAR_RATING:"five_option_star_rating"})}),null);
__d("FBStoriesInteractiveFeedbackOverlay.react",["cx","FBStoriesActions","FBStoriesExternalSong.react","FBStoriesPollSticker.react","FBStoriesPollStickerConstants","QE2Logger","React","FBStoriesGatingConfig","StoryOverlayPollStyle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i="fb_stories_web_poll_stickers_consumption_universe",j=[b("StoryOverlayPollStyle").TWO_OPTION_COMBINED.toUpperCase()];h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_4xuu",style:{width:this.props.widthPx,height:this.props.heightPx,top:this.props.topPx,left:this.props.leftPx}},this.$1())};a.prototype.$1=function(){__p&&__p();var a=b("FBStoriesGatingConfig").enablePollStickers,c=b("FBStoriesGatingConfig").logPollConsumptionExposures;return this.props.overlays.reduce(function(d,e){__p&&__p();if(e.__typename==="StoryOverlayPollSticker"){c&&b("QE2Logger").logExposureForUser(i);if(!a||j.indexOf(e.style)===-1)return d;var f=e.poll,g=f.can_viewer_vote,h=f.viewer_vote_index,l=f.id;f=f.poll_options;if(this.props.heightPx===""||!this.props.widthPx==="")return d;f=f.map(function(a){return{voteCount:a.vote_count,text:a.text}});var m=parseInt(this.props.heightPx.replace("px",""),10),n=parseInt(this.props.widthPx.replace("px",""),10);d.push(b("React").createElement(k,{key:"poll_"+e.poll.id,containerHeight:m,containerWidth:n,width:b("FBStoriesPollStickerConstants").DIMENSIONS.WIDTH,height:b("FBStoriesPollStickerConstants").DIMENSIONS.HEIGHT,bounds:e.voting_control_bounds},b("React").createElement(b("FBStoriesPollSticker.react"),{canViewerVote:g,viewerVoteIndex:h,isConsumer:this.props.isConsumer,pollId:l,pollOptions:f,onOptionVoted:this.$2})))}else e.__typename==="StoryOverlayExternalSong"&&d.push(b("React").createElement(b("FBStoriesExternalSong.react"),{key:"song",overlay:e,currentThreadID:this.props.currentThreadID}));return d}.bind(this),[])};a.prototype.$2=function(a,c){b("FBStoriesActions").onPollOptionVoted(a,c)};function a(){h.apply(this,arguments)}var k=function(a){__p&&__p();var c=a.bounds,d=c.height,e=c.width,f=c.x,g=c.y;c=c.rotation;d=a.containerHeight*d;e=a.containerWidth*e;d=d/a.height;e=e/a.width;g=g*100;f=f*100;g={width:a.width+"px",height:a.height+"px",top:g+"%",left:f+"%",transform:"scaleY("+d+") scaleX("+e+")"};f={transform:"rotate("+c+"deg)"};return b("React").createElement("div",{className:"_4xuv",style:g},b("React").createElement("div",{className:"_4xux",style:f},a.children))};e.exports=a}),null);
__d("FBStoriesIntegrityContext.react",["ix","cx","Image.react","IntegrityContextEntryPointJSEnum","Link.react","React","XArticleContextMainDialogController","asset","first"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=this.props.linkAttachment.action_links||[];a=b("first")(a.filter(function(a){return a.__typename==="ArticleContextActionLink"&&a.object_id}));if(a){a=b("XArticleContextMainDialogController").getURIBuilder().setFBID("share_id",a.object_id).setEnum("entry_type",b("IntegrityContextEntryPointJSEnum").STORIES_LEARN_MORE).getURI();return b("React").createElement(b("Link.react"),{onClick:this.props.onLinkClick,onMouseUp:function(a){return a.stopPropagation()},ajaxify:a,href:"#",rel:"dialog-post",className:"_2xoz"},b("React").createElement(b("Image.react"),{src:g("549915")}))}return null};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesLinkRenderer.react",["ix","cx","FBStoriesIntegrityContext.react","Image.react","LineClamp.react","Link.react","React","asset","idx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){__p&&__p();var a=this.props.currentThreadData;if(a&&!a.isLive){a=a.linkAttachment;if(a&&a.url){var c,d;c=((c=a)!=null?(c=c.title_with_entities)!=null?c.text:c:c)||"";d=((d=a)!=null?(d=d.animated_media)!=null?d.animated_image_attribution:d:d)||"";d=d||((d=a)!=null?(d=d.source)!=null?d.text:d:d)||"";return b("React").createElement("div",{className:"_68xc"},b("React").createElement(b("Link.react"),{onClick:this.props.onLinkClick,onMouseUp:function(a){return a.stopPropagation()},href:a.url,target:"_blank",className:"_3ddv"},b("React").createElement("div",{className:"_68xd"},b("React").createElement(b("LineClamp.react"),{lines:2,className:"_68xe"},c),b("React").createElement("div",{className:"_68xf"},b("React").createElement(b("Image.react"),{className:"_15iz",src:g("533519")}),d)),b("React").createElement("div",{className:"_15iy"})),b("React").createElement(b("FBStoriesIntegrityContext.react"),{onLinkClick:this.props.onLinkClick,linkAttachment:a}))}}return null};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesMinutiaeSecondaryText.react",["cx","Image.react","React","idx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a,c=this.props.inlineActivities&&this.props.inlineActivities.edges&&this.props.inlineActivities.edges.length>0?this.props.inlineActivities.edges[0]:null;a=(a=c)!=null?(a=a.node)!=null?(a=a.attachment_object)!=null?a.category_name:a:a:a;c=(c=c)!=null?(c=c.node)!=null?(c=c.taggable_activity_icon)!=null?c.small_image:c:c:c;c=c?b("React").createElement(b("Image.react"),{className:"_2pzi",src:c}):null;return a?b("React").createElement("div",{className:"_2pz8"},c,a):null};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesMinutiae.react",["cx","FBStoriesActivityDescription.react","FBStoryMinutiaeImageRenderer.react","FBStoriesMinutiaeSecondaryText.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("React").Fragment,null,b("React").createElement(b("FBStoryMinutiaeImageRenderer.react"),{inlineActivities:this.props.inlineActivities,largeProfilePhoto:!1,onLinkClick:this.props.onLinkClick}),b("React").createElement("div",{className:"_2bmm"},b("React").createElement(b("FBStoriesActivityDescription.react"),{onLinkClick:this.props.onLinkClick,activityDescription:this.props.activityDescription,openWithSidePanel:this.props.openWithSidePanel,className:"_3frn _3fro"}),b("React").createElement(b("FBStoriesMinutiaeSecondaryText.react"),{inlineActivities:this.props.inlineActivities})))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesMetadataRenderer.react",["cx","FBStoriesActivityDescription.react","FBStoriesLocationSecondaryText.react","FBStoriesMinutiae.react","FBStoryMetadataUtils","React","SplitImage.react","gkx","idx","StoryFooterMetadataFromComposerType"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){__p&&__p();var a=this.props.currentThreadData;if(a&&!a.isLive&&b("gkx")("AT5j4B-_wMc8iod27NXaAt9CZquI-IQppIePE_YMZuSsoP8gHIrCr-EsNEwyuMneFsKuaVyvX3cgDBDoH-2Qw7byofk5-76W16P14YhstW8sWA")){var c=b("FBStoryMetadataUtils").getStoryFooterMetadataType(a.activityDescription,a.explicitLocation,a.inlineActivities,a.withTags),d=b("FBStoryMetadataUtils").isMetadataOnly(a.explicitLocation,a.inlineActivities,a.withTags,a.messageText,a.media,a.linkAttachment);if(d&&c!==b("StoryFooterMetadataFromComposerType").COMPLEX_SOCIAL_SENTENCE)return null;d=null;switch(c){case b("StoryFooterMetadataFromComposerType").LOCATION_ONLY:d=b("React").createElement("div",{className:"_2bmm _3frm"},b("React").createElement(b("FBStoriesActivityDescription.react"),{activityDescription:a.activityDescription,openWithSidePanel:this.props.openWithSidePanel,onLinkClick:this.props.onLinkClick}),b("React").createElement(b("FBStoriesLocationSecondaryText.react"),{explicitLocation:a.explicitLocation}));break;case b("StoryFooterMetadataFromComposerType").TAGGING_ONLY:c=a.withTags?a.withTags.edges.map(function(a){return(a=a)!=null?(a=a.node)!=null?(a=a.profile_picture)!=null?a.uri:a:a:a}).filter(Boolean):[];d=b("React").createElement(b("React").Fragment,null,b("React").createElement(b("SplitImage.react"),{className:"_2bmp",srcs:c,size:54,border:!0}),b("React").createElement(b("FBStoriesActivityDescription.react"),{className:"_3frn _3fro",activityDescription:a.activityDescription,openWithSidePanel:this.props.openWithSidePanel,onLinkClick:this.props.onLinkClick}));break;case b("StoryFooterMetadataFromComposerType").MINUTIAE_ONLY:d=b("React").createElement(b("FBStoriesMinutiae.react"),{activityDescription:a.activityDescription,inlineActivities:a.inlineActivities,openWithSidePanel:this.props.openWithSidePanel,onLinkClick:this.props.onLinkClick});break;case b("StoryFooterMetadataFromComposerType").COMPLEX_SOCIAL_SENTENCE:d=b("React").createElement(b("FBStoriesActivityDescription.react"),{onLinkClick:this.props.onLinkClick,activityDescription:a.activityDescription,openWithSidePanel:this.props.openWithSidePanel});break;case b("StoryFooterMetadataFromComposerType").NONE:return null}if(d)return b("React").createElement("div",{className:"_2bmq"},d)}return null};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesNuxHelper",["AsyncRequest","XBasicFBNuxGenShouldShowController","XBasicFBNuxViewController"],(function(a,b,c,d,e,f){"use strict";a={checkIfNuxShouldBeShown:function(a,c){a=b("XBasicFBNuxGenShouldShowController").getURIBuilder().setInt("nux_id",a).getURI();new(b("AsyncRequest"))().setURI(a).setMethod("GET").setReadOnly(!0).setHandler(function(a){a=a.getPayload();a.should_show_nux&&c()}).send()},markNuxAsShown:function(a){a=b("XBasicFBNuxViewController").getURIBuilder().setInt("nux_id",a).getURI();new(b("AsyncRequest"))().setURI(a).send()}};e.exports=a}),null);
__d("FBStoriesReportToAdminConfirmationDialog.react",["cx","fbt","React","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=500;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){return b("React").createElement(b("XUIDialog.react"),{width:j,shown:this.props.shown,isStrictlyControlled:!0,onHide:this.props.hideAction},b("React").createElement(b("XUIDialogTitle.react"),null,h._("Report to Admin")),b("React").createElement(b("XUIDialogBody.react"),null,this.$1(this.props.mediaType)),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement("div",null,b("React").createElement(b("XUIDialogCancelButton.react"),{onClick:this.props.hideAction}),b("React").createElement(b("XUIDialogButton.react"),{action:"confirm",className:"_4jy1",label:h._("Report to Admin"),onClick:this.props.confirmAction}))))};a.prototype.$1=function(a){a=a||"";switch(a.toUpperCase()){case"PHOTO":return h._("Are you sure you want to report this photo to an admin?");case"VIDEO":return h._("Are you sure you want to report this video to an admin?");default:return h._("Are you sure you want to report this to an admin?")}};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("FBStoryThreadGroupAdminNux.react",["ix","cx","fbt","FBStoriesNuxHelper","GroupView","Image.react","LayerFadeOnShow","PageTransitions","React","XGroupsController","XUICloseButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=400,l=5659;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.$1=function(){b("FBStoriesNuxHelper").markNuxAsShown(l),this.props.onClose()}.bind(this),this.$2=function(){this.$1();this.props.onNavigateToGroupSettings();var a=b("XGroupsController").getURIBuilder().setString("idorvanity",this.props.groupID).setEnum("view",b("GroupView").EDIT).setExists("stories",!0).getURI();b("PageTransitions").go(a)}.bind(this),c}a.nuxID=function(){return l};a.prototype.render=function(){return b("React").createElement(b("XUIDialog.react"),{behaviors:{LayerFadeOnShow:b("LayerFadeOnShow")},width:k,shown:this.props.shown,isStrictlyControlled:!0,onHide:this.$1,titleID:"group-nux-header"},b("React").createElement("div",null,b("React").createElement(b("Image.react"),{id:"group-nux-header",height:k*.4,width:k,src:g("477001")}),b("React").createElement(b("XUICloseButton.react"),{className:"layerCancel _51-t _43we"})),b("React").createElement(b("XUIDialogBody.react"),null,b("React").createElement("div",{className:"_43wf"},i._("Welcome to Your Group's Story")),b("React").createElement("p",null,i._("Now group members can contribute to a single shared story.")),b("React").createElement("p",null,i._("Photos and videos disappear from your group after 24 hours, and admins can always control what gets added."))),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement("div",null,b("React").createElement(b("XUIDialogButton.react"),{action:"confirm",label:i._("View Settings"),onClick:this.$2}),b("React").createElement(b("XUIDialogButton.react"),{action:"confirm",className:"_4jy1",label:i._("OK"),onClick:this.$1}))))};e.exports=a}),null);
__d("FBStoryThreadTagsSidePane.react",["ix","cx","fbt","FBStorySidePaneSection.react","FBStorySidePaneSectionHeader.react","FBStorySidePaneSectionPadding.react","Image.react","React","ShimButton.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;j=babelHelpers.inherits(a,b("React").PureComponent);j&&j.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_434n"},b("React").createElement(b("FBStorySidePaneSectionHeader.react"),null,b("React").createElement("span",{className:"_2qy7"},b("React").createElement(b("Image.react"),{className:"_2qy8",src:g("512616")}),b("React").createElement("span",{className:"_2qy9"},i._("With"))),b("React").createElement(b("ShimButton.react"),{onClick:this.props.closeWithTagPane},b("React").createElement(b("Image.react"),{className:"_2qya",src:g("489953")}))),b("React").createElement(b("FBStorySidePaneSectionPadding.react"),null),b("React").createElement("div",{className:"_434o"},b("React").createElement(b("FBStorySidePaneSection.react"),{data:this.props.tags.map(function(a){return a.node}),poll:null})))};function a(){j.apply(this,arguments)}e.exports=a}),null);
__d("FBStoryThread.react",["ix","cx","fbt","CameraPostBucketOwnerHelper","CameraPostDeletedToast.react","CameraPostGraphQLAPI","CameraPostMedia.react","CameraPostMediaHelper","CameraPostOwnerView.react","CameraPostReportButton.react","CameraPostSendingToast.react","CameraPostSendReply.react","CameraPostTypesHelper","Event","FBStoriesDeleteConfirmationDialog.react","FBStoriesInteractiveFeedbackOverlay.react","FBStoriesLinkRenderer.react","FBStoriesLoggingConstants","FBStoriesLoggingHelper","FBStoriesMetadataRenderer.react","FBStoriesMuteConfirmationDialog.react","FBStoriesNuxHelper","FBStoriesOptimisticUploadLabel.react","FBStoriesReportToAdminConfirmationDialog.react","FBStoriesViewerEntrypoint","FBStoriesViewersAnchor.react","FBStoryLiveSidePaneContainer.react","FBStoryThreadGroupAdminNux.react","FBStoryThreadTagsSidePane.react","FBStoryThreadViewers.react","GroupsStoriesAdminConfig","GroupView","Image.react","ImagePositioner.react","Keys","Locale","PageTransitions","React","ReactCSSTransitionGroup","ReactMenu","ShimButton.react","XGroupsController","asset","createCancelableFunction","emptyFunction","fbglyph","getActiveElement","gkx","promiseDone","SegmentedProgressBar.react","XUISpinner.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("ReactMenu").Item,l={enter:"_1gs8",enterActive:"_1gs9",leave:"_1gsa",leaveActive:"_1gsc"},m=Object.freeze({PREV:"prev",NEXT:"next",STAY_HERE:"stay_here"}),n=.3,o=1e3,p=200,q=1e3,r=200,s=200,t=200,u=500,v=500,w={enter:"_3dep",enterActive:"_3deq",leave:"_3der",leaveActive:"_3deu"};c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.state={isPaused:!1,isReplyFocused:!1,navDirectionOnClick:m.STAY_HERE,isShowingSendingToast:!1,isShowingDeletedToast:!1,showPausedOverlay:!1,showStoryUI:!0,isViewersPanelShown:!1,isDeleteConfirmationDialogShown:!1,isMuteConfirmationDialogShown:!1,isGroupAdminNuxShown:!1,isReportToAdminConfirmationDialogShown:!1,isWithPanelShown:!1},this.$20=function(a){a!==this.$4&&(a&&(b("Event").listen(a,"keydown",function(event){return this.$59(event)}.bind(this),b("Event").Priority.URGENT),b("Event").listen(a,"keyup",function(event){return this.$60(event)}.bind(this),b("Event").Priority.URGENT),a.focus())),this.$4=a}.bind(this),this.$33=function(){this.$17(!1,!0),this.$8=!0}.bind(this),this.$34=function(){!this.$7&&!this.state.isReplyFocused&&!this.state.isViewersPanelShown&&this.$55(),this.$7=!1,this.$8=!1}.bind(this),this.$61=function(){var a=!this.state.isViewersPanelShown;this.setState({isViewersPanelShown:a,isWithPanelShown:!1});a&&this.$19();this.$8||(a?this.$17(!1,!0):this.$55())}.bind(this),this.$41=function(){this.setState({isWithPanelShown:!0,isViewersPanelShown:!1}),this.$8||this.$17(!1,!0)}.bind(this),this.$42=function(a){this.$8||this.$17(!1,!0),a.stopPropagation()}.bind(this),this.$58=function(){this.setState({isWithPanelShown:!1}),this.$8||this.$55()}.bind(this),this.$35=function(){this.$7=!0,this.$17(!1,!1)}.bind(this),this.$25=function(){this.setState({isDeleteConfirmationDialogShown:!0})}.bind(this),this.$52=function(){this.setState({isDeleteConfirmationDialogShown:!1})}.bind(this),this.$51=function(){this.setState({isDeleteConfirmationDialogShown:!1}),this.$62()}.bind(this),this.$28=function(){this.setState({isMuteConfirmationDialogShown:!0})}.bind(this),this.$53=function(){this.setState({isMuteConfirmationDialogShown:!1})}.bind(this),this.$54=function(){this.setState({isMuteConfirmationDialogShown:!1}),this.props.onMuteBucketOwner()}.bind(this),this.$31=function(){this.setState({isReportToAdminConfirmationDialogShown:!0})}.bind(this),this.$57=function(){this.setState({isReportToAdminConfirmationDialogShown:!1})}.bind(this),this.$56=function(){this.setState({isReportToAdminConfirmationDialogShown:!1}),this.props.onReportCurrentThreadToAdmin()}.bind(this),this.$22=function(){if(!this.props.currentThreadData)return;var a=this.props.currentThreadData.bucketOwner;a=b("CameraPostBucketOwnerHelper").getId(a);if(!a)return;this.props.onCloseRequested();a=b("XGroupsController").getURIBuilder().setString("idorvanity",a).setEnum("view",b("GroupView").PENDING_STORIES).getURI();b("PageTransitions").go(a)}.bind(this),this.$44=function(){this.$64()}.bind(this),this.$68=b("createCancelableFunction")(function(){this.setState({isShowingSendingToast:!1})}.bind(this)),this.$67=b("createCancelableFunction")(function(a){this.setState({isShowingSendingToast:!0},function(){this.$9=setTimeout(function(){this.$9=undefined,this.$68()}.bind(this),a)}.bind(this))}.bind(this)),this.$47=function(a){__p&&__p();if(a==="")return;var c=this.props.currentThreadData;if(!c||c.isLive)return;var d=c.threadID;c=c.cameraPostType;var e=this.props.userInfo.userID;this.$66();this.$55();this.setState({isReplyFocused:!1});this.$4.focus();b("promiseDone")(b("CameraPostGraphQLAPI").sendDirectMessageReply(e,d,a,c,!0))}.bind(this),this.$49=function(a){__p&&__p();if(a==="")return;var c=this.props.currentThreadData;if(!c||c.isLive)return;var d=c.threadID;c=c.cameraPostType;var e=this.props.userInfo.userID;this.$66();this.$55();this.setState({isReplyFocused:!1});this.$4.focus();b("promiseDone")(b("CameraPostGraphQLAPI").sendDirectStickerReply(e,d,c,a))}.bind(this),this.$50=function(a){__p&&__p();if(a){var c=this.props.currentThreadData;if(!c||c.isLive)return;var d=c.threadID;c=c.cameraPostType;var e=this.props.userInfo.userID;a=a.source.url;this.$66();this.$55();this.setState({isReplyFocused:!1});this.$4.focus();b("promiseDone")(b("CameraPostGraphQLAPI").sendDirectGifReply(e,d,c,a))}}.bind(this),this.$70=b("createCancelableFunction")(function(a,b){this.setState({isShowingDeletedToast:!1}),b&&(this.$11=setTimeout(function(){this.$11=undefined,b&&b()}.bind(this),a))}.bind(this)),this.$69=b("createCancelableFunction")(function(a,b,c){this.setState({isShowingDeletedToast:!0},function(){this.$10=setTimeout(function(){this.$10=undefined,this.$70(b,c)}.bind(this),a)}.bind(this))}.bind(this)),this.$48=function(a){this.$17(!1,!0),this.setState({isReplyFocused:!0})}.bind(this),this.$71=function(a){this.$55(),this.setState({isReplyFocused:!1})}.bind(this),this.$43=function(a){this.state.isPaused?(this.$55(),this.state.isReplyFocused&&this.setState({isReplyFocused:!1})):this.$17(!1,!0)}.bind(this),this.$36=function(a){clearTimeout(this.$3),this.$3=setTimeout(function(){if(this.state.isPaused)return;this.$17(!0,!1)}.bind(this),u)}.bind(this),this.$37=function(a){__p&&__p();clearTimeout(this.$3);if(a.target.tagName==="INPUT")return;if(this.state.isPaused)this.$55(),this.state.isReplyFocused&&this.setState({isReplyFocused:!1});else{if(!this.props.enableNavigation)return;if(a.target.className!=="_ide")return;this.state.navDirectionOnClick===m.PREV?this.$65():this.state.navDirectionOnClick===m.NEXT&&!this.state.isLastThread&&this.$64()}}.bind(this),this.$38=function(event){this.$1=event.target}.bind(this),this.$39=function(event){this.state.isPaused&&this.setState({showPausedOverlay:!0})}.bind(this),this.$40=function(a){var c=a.currentTarget.offsetWidth;a=a.nativeEvent.offsetX;var d=n*c;b("Locale").isRTL()&&(a=c-a);a>=0&&a<=d?this.setState({navDirectionOnClick:m.PREV}):a>=c-d&&a<=c?this.setState({navDirectionOnClick:m.NEXT}):this.setState({navDirectionOnClick:m.STAY_HERE})}.bind(this),c}a.prototype.componentDidMount=function(){this.$12(),this.$13(this.props)};a.prototype.UNSAFE_componentWillUpdate=function(a,b){!this.props.allBucketsViewed&&a.allBucketsViewed&&a.onDone(),this.props.bucketID!==a.bucketID?(this.setState(this.$14()),this.$13(a)):this.props.currentThreadIndex!==a.currentThreadIndex&&this.$15(),this.$16(a,b)};a.prototype.componentDidUpdate=function(){var a=b("getActiveElement")();!this.state.isReplyFocused&&this.$4&&!this.props.isBucketLive&&(!this.$1||this.$1===a&&a.tagName!=="A"&&a.tagName!=="BUTTON")&&this.$4.focus()};a.prototype.$15=function(){var a=this.props.currentThreadData;if(!a)return;this.setState({isPaused:!1,showStoryUI:!0,showPausedOverlay:!1})};a.prototype.$13=function(a){a.isGroupAdminBucket&&b("FBStoriesNuxHelper").checkIfNuxShouldBeShown(b("FBStoryThreadGroupAdminNux.react").nuxID(),function(){this.$17(!1,!1),this.setState({isGroupAdminNuxShown:!0})}.bind(this))};a.prototype.$12=function(){b("FBStoriesLoggingHelper").openMediaLog()};a.prototype.$18=function(){b("FBStoriesLoggingHelper").mediaLog(b("FBStoriesLoggingConstants").ACTION_DELETE_MEDIA)};a.prototype.$19=function(){b("FBStoriesLoggingHelper").mediaLog(b("FBStoriesLoggingConstants").ACTION_OPEN_SEEN_SUMMARY)};a.prototype.$16=function(a,b){a.currentThreadID!==this.props.currentThreadID&&(a.currentThreadID||a.isBucketLive)&&this.$12()};a.prototype.render=function(){__p&&__p();var a="_4tkv"+(this.props.isLandscape&&this.props.isBucketLive?" _fxh":"")+" _24o3"+(this.props.isBucketLive?" _2dnb":""),c=this.props.userInfo,d=c.userID,e=c.userName;c=c.userProfilePic;var f=this.props.currentThreadData;if(!f)return b("React").createElement("div",{role:"tabpanel",tabIndex:-1,ref:this.$20,className:a});var h=f.media,j=f.cameraPostType,n=b("CameraPostMediaHelper").getType(h),o=b("CameraPostMediaHelper").getWidth(h),q=b("CameraPostMediaHelper").getHeight(h),u=b("CameraPostMediaHelper").isSphericalPhoto(h),v=void 0,x=void 0,y=void 0,z=void 0,A=void 0,B=void 0,C="",D=void 0,E=void 0,F=void 0,G={},H=void 0,I=void 0;if(!f.isLive){var J=f.time,K=f.participants,L=f.bucketOwner,M=f.threadOwner,N=f.cameraPostSource,O=f.wwwTextFormatMetadata,P=f.textFormatMetadata,Q=f.instagramProfileURL,R=f.originalPostStoryAttribution,S=f.withTags,T=f.inlineActivities,U=f.explicitLocation,V=f.activityDescription;B=f.threadID;C=f.messageText;D=f.isPlainText;E=f.backdropImage;F=f.defaultBackground;H=f.linkAttachment;I=f.mediaBackground;x=b("CameraPostBucketOwnerHelper").getName(L);v=b("CameraPostBucketOwnerHelper").getId(L);z={rootMessageText:C,wwwTextFormatMetadata:O,textFormatMetadata:P};G={withTags:S,inlineActivities:T,explicitLocation:U,activityDescription:V};O=[];this.$21()&&O.push(b("React").createElement(k,{onClick:this.$22,key:"group_pending_stories"},b("React").createElement(b("Image.react"),{src:g("366764")}),this.$23()));this.$24()&&O.push(b("React").createElement(k,{disabled:this.props.isStoryUploading,onClick:this.$25,key:"delete_own_thread"},this.props.isStoryUploading&&b("React").createElement(b("XUISpinner.react"),{size:"small"}),b("React").createElement(b("Image.react"),{src:g("114073")}),this.$26(n)));this.$27()&&O.push(b("React").createElement(k,{onClick:this.$28,key:"mute_bucket_owner"},b("React").createElement(b("Image.react"),{src:g("113496")}),b("React").createElement("span",{className:"_65ki"},this.$29(x))));this.$30()&&O.push(b("React").createElement(k,{onClick:this.$31,key:"report_thread"},b("React").createElement(b("Image.react"),{src:g("372467")}),this.$32()));A=b("React").createElement("span",null,b("React").createElement(b("SegmentedProgressBar.react"),{paused:this.state.isPaused,currentSegmentIndex:this.props.currentThreadIndex,currentSegmentPercentComplete:this.props.currentThreadPercentDone,segmentCount:this.props.threadsCount}),b("React").createElement(b("CameraPostReportButton.react"),{isOwnThread:this.props.isOwnThread,threadID:B,onPopoverShow:this.$33,onPopoverHide:this.$34,onPopoverItemClick:this.$35},O));y=b("React").createElement(b("CameraPostOwnerView.react"),{cameraPostType:j,cameraPostSource:N,isSphericalPhoto:u,participants:K,bucketOwner:L,threadID:B,threadOwner:M,time:J,instagramProfileURL:Q,originalPostStoryAttribution:R})}P=200;S=this.state.showPausedOverlay&&!u?b("React").createElement(b("ReactCSSTransitionGroup"),{transitionName:w,transitionEnterTimeout:P,transitionLeaveTimeout:P},b("React").createElement(b("ShimButton.react"),{"aria-label":i._("Play"),className:"_ida",onMouseDown:this.$36,onMouseUp:this.$37,onKeyPress:this.$37,tabIndex:0},b("React").createElement("span",{className:"_idd"}))):null;T=b("CameraPostMedia.react").getMediaSizeBasedOnWindow();U=b("React").createElement("span",null,b("React").createElement("div",{role:"tabpanel",tabIndex:0,ref:this.$20,className:a,onFocus:this.$38,onMouseOut:this.$39,onMouseMove:this.$40},b("React").createElement("div",{className:"_24o4"+(this.state.navDirectionOnClick===m.PREV||this.state.navDirectionOnClick===m.NEXT?" _4drj":""),key:B},b("React").createElement(b("CameraPostMedia.react"),{backdropImage:E,linkAttachment:H,mediaBackground:I,defaultBackground:F,storyMetadata:G,openWithSidePanel:this.$41,onLinkClick:this.$42,media:h,loop:!1,paused:this.state.isPaused,onTimeUpdate:this.props.onTimeUpdate,onMouseDown:u?null:this.$36,onMouseUp:u?null:this.$37,onClick:u?this.$43:null,onDone:this.props.isBucketLive?null:this.$44,onMuteMouseUp:this.props.onClickMute,isBucketLive:this.props.isBucketLive,isMediaMuted:this.props.isStoryMuted,cameraPostType:j,userID:d,threadID:B,showMuteButton:this.state.showStoryUI&&!this.props.isSelectedBucketLiveAndEnded,satpData:z,messageText:C,isPlainText:D,onVideoPaused:function(){this.state.isPaused||this.$17(!1,!0)}.bind(this)},b("React").createElement(b("ReactCSSTransitionGroup"),{transitionName:w,transitionEnterTimeout:s,transitionLeaveTimeout:t},this.$45())),S,b("React").createElement(b("ReactCSSTransitionGroup"),{transitionName:w,transitionEnterTimeout:s,transitionLeaveTimeout:t},this.state.showStoryUI&&y,this.$46(m.PREV),this.$46(m.NEXT)),b("React").createElement(b("ReactCSSTransitionGroup"),{transitionName:l,transitionEnterTimeout:p,transitionLeaveTimeout:p},this.state.isShowingSendingToast&&b("React").createElement(b("CameraPostSendingToast.react"),null)),b("React").createElement(b("ReactCSSTransitionGroup"),{transitionName:l,transitionEnterTimeout:r,transitionLeaveTimeout:r},b("React").createElement(b("CameraPostDeletedToast.react"),{key:this.state.isShowingDeletedToast,visible:this.state.isShowingDeletedToast}))),b("React").createElement(b("ReactCSSTransitionGroup"),{transitionName:w,transitionEnterTimeout:s,transitionLeaveTimeout:t},b("React").createElement("div",null,this.state.showStoryUI&&A,this.props.shouldDisableReply?null:b("React").createElement(b("CameraPostSendReply.react"),{cameraPostType:j,replyProfileName:e,replyProfilePic:c,userID:d,threadID:B,ownerID:f.bucketOwner.id,focused:this.state.isReplyFocused,onReplyEntered:this.$47,onFocusInput:this.$48,onStickerSelect:this.$49,onGifSelect:this.$50}))),b("React").createElement(b("ImagePositioner.react"),{width:T.width,height:T.height,imageWidth:o,imageHeight:q},function(a){var c=a.top,d=a.left,e=a.width;a=a.height;return b("React").createElement(b("FBStoriesInteractiveFeedbackOverlay.react"),{currentThreadID:this.props.currentThreadID,topPx:c,leftPx:d,widthPx:e,heightPx:a,overlays:this.props.threadOverlays,isConsumer:!this.props.isOwnThread})}.bind(this))),b("React").createElement(b("FBStoriesDeleteConfirmationDialog.react"),{confirmAction:this.$51,hideAction:this.$52,mediaType:n,shown:this.state.isDeleteConfirmationDialogShown}),b("React").createElement(b("FBStoriesMuteConfirmationDialog.react"),{shown:this.state.isMuteConfirmationDialogShown,hideAction:this.$53,confirmAction:this.$54,bucketOwnerName:x,cameraPostType:j}),b("React").createElement(b("FBStoryThreadGroupAdminNux.react"),{groupID:v||"",onClose:function(){this.$55(),this.setState({isGroupAdminNuxShown:!1})}.bind(this),onNavigateToGroupSettings:this.props.onCloseRequested,shown:this.state.isGroupAdminNuxShown}),b("React").createElement(b("FBStoriesReportToAdminConfirmationDialog.react"),{confirmAction:this.$56,hideAction:this.$57,mediaType:n,shown:this.state.isReportToAdminConfirmationDialogShown}));if(this.props.isBucketLive)return b("React").createElement("div",{className:"_115q"},U,b("React").createElement(b("FBStoryLiveSidePaneContainer.react"),{onDone:this.props.onDone}));V=null;this.props.isOwnThread&&this.state.isViewersPanelShown?V=b("React").createElement("div",{className:"_115r _397_"},b("React").createElement(b("FBStoryThreadViewers.react"),{viewers:this.props.threadViewers,threadOverlays:this.props.threadOverlays,cameraPostType:j})):this.state.isWithPanelShown&&this.props.currentThreadData&&!this.props.currentThreadData.isLive&&this.props.currentThreadData.withTags&&(V=b("React").createElement("div",{className:"_115r"+(this.props.shouldDisableReply?"":" _115s")},b("React").createElement(b("FBStoryThreadTagsSidePane.react"),{tags:this.props.currentThreadData.withTags.edges,closeWithTagPane:this.$58})));return V?b("React").createElement("div",{className:"_115q"},b("React").createElement(b("ReactCSSTransitionGroup"),{transitionName:w,transitionEnterTimeout:s,transitionLeaveTimeout:t},V),U):U};a.prototype.$62=function(){this.$17(!1,!1);this.$18();var a=function(){var a=this.props.currentThreadID,b=this.props.bucketID;a&&b&&this.$24()&&this.props.onDeleteCurrentThread();this.$55()}.bind(this);this.$63(a)};a.prototype.$46=function(a){__p&&__p();if(!this.state.showStoryUI||this.state.showPausedOverlay||!this.props.enableNavigation)return null;var c=this.props.allowedNavType==="PREV_ONLY"&&a===m.NEXT,d=this.props.allowedNavType==="NEXT_ONLY"&&a===m.PREV;if(d||c)return null;d=function(b){b.preventDefault(),b.stopPropagation(),this.$4.focus(),a===m.NEXT?this.$64():this.$65()}.bind(this);c=function(b){b.stopPropagation(),this.setState({navDirectionOnClick:a})}.bind(this);return b("React").createElement("button",{"aria-label":a===m.NEXT?i._("Next Button"):a===m.PREV?i._("Previous Button"):i._("Button"),className:"_24o5"+(a===m.NEXT?" _24o8":"")+(a===m.PREV?" _24o7":"")+(this.state.navDirectionOnClick===a?" _24o6":""),onClick:d,onMouseMove:c,tabIndex:0})};a.prototype.$66=function(){this.$67(o)};a.prototype.$63=function(a){this.$69(q,r,a)};a.prototype.$64=function(){this.props.onNextThread()};a.prototype.$65=function(){this.props.onPrevThread()};a.prototype.$59=function(event){__p&&__p();if(event.getModifiers().any||this.state.isReplyFocused||event.target!==this.$4||!this.props.enableNavigation)return!0;var a=b("Event").getKeyCode(event);switch(a){case b("Keys").LEFT:b("Locale").isRTL()?this.$64():this.$65();return!1;case b("Keys").RIGHT:b("Locale").isRTL()?this.$65():this.$64();return!1;default:a=String.fromCharCode(a);a.match(/\w/)&&this.setState({isReplyFocused:!0})}return null};a.prototype.$60=function(event){__p&&__p();if(event.getModifiers().any||this.state.isReplyFocused||event.target!==this.$4)return!0;var a=b("Event").getKeyCode(event);switch(a){case b("Keys").SPACE:if(this.$8||this.state.isViewersPanelShown)return!1;!this.state.isPaused?this.$17(!1,!0):this.$55();event.preventDefault();event.stopImmediatePropagation();return!1;default:return null}};a.prototype.$17=function(a,b){this.setState({isPaused:!0,showStoryUI:!0,showPausedOverlay:b}),a&&(clearTimeout(this.$2),this.$2=setTimeout(function(){this.setState({showStoryUI:!1})}.bind(this),v))};a.prototype.$55=function(){clearTimeout(this.$3),clearTimeout(this.$2),this.setState({isPaused:!1,showPausedOverlay:!1,showStoryUI:!0,isViewersPanelShown:!1,isWithPanelShown:!1})};a.prototype.$26=function(a){a=a||"";if(!this.$24())return null;switch(a.toUpperCase()){case"PHOTO":return i._("Delete Photo");case"VIDEO":return i._("Delete Video");default:return i._("Delete")}};a.prototype.$27=function(){return this.props.viewerEntrypoint===b("FBStoriesViewerEntrypoint").HOMEPAGE_TRAY&&!this.props.isUserManagedBucket};a.prototype.$21=function(){__p&&__p();if(!this.props.isGroupAdminBucket)return!1;if(!this.props.currentThreadData)return!1;var a=this.props.currentThreadData.bucketOwner;if(!b("CameraPostBucketOwnerHelper").requiresAdminApproval(a))return!1;var c=b("GroupsStoriesAdminConfig").showPendingStoriesInViewerForGroupId;a=b("CameraPostBucketOwnerHelper").getId(a);return!(a in c)||!c[a]?!1:!0};a.prototype.$29=function(a){return i._("Mute {bucket_owner_name}",[i._param("bucket_owner_name",a)])};a.prototype.$23=function(){return i._("Review Photos\/Videos")};a.prototype.$30=function(){if(this.props.isOwnThread)return!1;if(this.props.isGroupAdminBucket)return!1;var a=this.props.currentThreadData;if(!a)return!1;a=a.cameraPostType;return!b("CameraPostTypesHelper").isGroupStory(a)?!1:b("gkx")("AT6AEel4IRvdKiKTL8K2X0ZTy0U5pjIVXgCmwgOr8ub7vRHBdRmqti6x_q4o1TqHlTVQvjcf0FAzRKiaAQjjYdDkY0RK2TjcwRW1W4i9okBKCw")};a.prototype.$32=function(){return i._("Report to Admin")};a.prototype.$24=function(){return this.props.isUserManagedThread};a.prototype.$14=function(){return{isPaused:!1,isReplyFocused:!1,navDirectionOnClick:m.STAY_HERE,isShowingSendingToast:!1,isShowingDeletedToast:!1,showPausedOverlay:!1,showStoryUI:!0,isViewersPanelShown:!1,isDeleteConfirmationDialogShown:!1,isMuteConfirmationDialogShown:!1,isGroupAdminNuxShown:!1,isReportToAdminConfirmationDialogShown:!1,isWithPanelShown:!1}};a.prototype.$45=function(){var a=null;this.props.isStoryUploading?a=b("React").createElement(b("FBStoriesOptimisticUploadLabel.react"),null):this.props.isThreadReviewStatusPending?a=b("React").createElement("span",{className:"_449_"},i._("Pending Admin Approval")):this.props.isOwnThread&&this.state.showStoryUI&&!this.props.isBucketLive&&(a=b("React").createElement(b("FBStoriesViewersAnchor.react"),{totalViewers:this.props.threadViewers.totalCount,highlighted:this.props.threadViewers.hasNewViewers,onClick:this.$61,disabled:!1,color:"light"}));return b("React").createElement("div",{className:"_2up9"},b("React").createElement(b("FBStoriesMetadataRenderer.react"),{currentThreadData:this.props.currentThreadData,openWithSidePanel:this.$41,onLinkClick:this.$42}),b("React").createElement(b("FBStoriesLinkRenderer.react"),{currentThreadData:this.props.currentThreadData,onLinkClick:this.$42}),b("React").createElement("div",{className:"_2upa"},a))};a.prototype.componentWillUnmount=function(){this.$55(),this.$5&&this.$5.cancel(),this.$6&&this.$6.cancel(),this.$67.cancel(),this.$68.cancel(),this.$69.cancel(),this.$70.cancel(),[this.$9,this.$10,this.$11].forEach(function(a){a&&clearTimeout(a)})};a.defaultProps={enableNavigation:!0,isStoryMuted:!1,isStoryUploading:!1,isUserManagedThread:!1,isUserManagedBucket:!1,isGroupAdminBucket:!1,shouldDisableReply:!1,allowedNavType:"NEXT_ONLY",isBucketLive:!1,isLandscape:!1,isSelectedBucketLiveAndEnded:!1,isThreadReviewStatusPending:!1,currentThreadPercentDone:0,threadOverlays:[],onDone:b("emptyFunction"),onClickMute:b("emptyFunction"),onDeleteCurrentThread:b("emptyFunction"),onMuteBucketOwner:b("emptyFunction"),onReportCurrentThreadToAdmin:b("emptyFunction"),onNextThread:b("emptyFunction"),onPrevThread:b("emptyFunction"),onTimeUpdate:function(a){},onCloseRequested:b("emptyFunction")};e.exports=a}),null);
__d("FBStoryContainer.react",["CameraPostMediaHelper","CurrentUser","ErrorBoundary.react","FBStoriesActions","FBStoriesCurrentThreadDataHelper","FBStoriesStore","FBStoriesViewerCard.react","FBStoryThread.react","FluxContainer","React","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state={allowedNavType:"NEXT_ONLY",bucketID:null,currentThreadIndex:0,currentThreadData:null,currentThreadID:null,threadsCount:0,threadViewers:{hasNewViewers:!1,friends:[],connections:[],nonFriendsCount:0,totalCount:0,totalNew:0},bucketOwner:{id:"",name:"",short_name:"",gender:"",is_viewer_friend:!1,profile_picture:null,is_employee:!1},userInfo:{userID:b("CurrentUser").getID(),userName:b("CurrentUser").getName()},allBucketsViewed:!1,shouldDisableReply:!1,isOwnThread:!1,isStoryUploading:!1,isUserManagedThread:!1,isUserManagedBucket:!1,isGroupAdminBucket:!1,showPausedOverlay:!1,showStoryUI:!0,isBucketLive:!1,isLandscape:!1,isSelectedBucketLiveAndEnded:!1,isThreadReviewStatusPending:!1,threadOverlays:[],viewerEntrypoint:null},this.$1=function(){var a=this.state.currentThreadID,c=this.state.bucketID;a&&c&&b("FBStoriesActions").deleteThreadFromBucket(a,c)}.bind(this),this.$2=function(){b("FBStoriesActions").muteBucketOwner(this.state.bucketOwner,this.state.bucketID)}.bind(this),this.$5=function(){var a=this.state.currentThreadID;a&&b("FBStoriesActions").reportThreadToAdmin(a)}.bind(this),this.$3=function(){this.state.allowedNavType!=="PREV_ONLY"?b("FBStoriesActions").nextThread():this.props.onDone()}.bind(this),this.$4=function(){this.state.allowedNavType!=="NEXT_ONLY"&&b("FBStoriesActions").prevThread()}.bind(this),c}a.getStores=function(){return[b("FBStoriesStore")]};a.calculateState=function(a){a=b("FBStoriesStore").getCurrentThreadViewers();var c=b("FBStoriesStore").isOwnThread(),d=b("FBStoriesStore").getCurrentThreadStatusForSelectedBucket()==="UPLOADING",e=b("FBStoriesStore").isCurrentThreadUserManaged(),f=b("FBStoriesStore").isCurrentBucketUserManaged(),g=b("FBStoriesStore").isCurrentBucketGroupAdmin(),h=b("FBStoriesStore").getCurrentThreadData(),i=b("FBStoriesCurrentThreadDataHelper").getCameraPostMedia(h),j=b("CameraPostMediaHelper").getHeight(i);i=b("CameraPostMediaHelper").getWidth(i);j=j<i;i={bucketID:b("FBStoriesStore").getSelectedBucketId(),currentThreadIndex:b("FBStoriesStore").getCurrentThreadIndexForSelectedBucket(),currentThreadPercentDone:b("FBStoriesStore").getCurrentThreadPercentDone(),currentThreadID:b("FBStoriesStore").getCurrentThreadIDForSelectedBucket(),threadsCount:b("FBStoriesStore").getThreadCountForSelectedBucket(),threadOverlays:b("FBStoriesStore").getCurrentThreadOverlays(),bucketOwner:b("FBStoriesStore").getSelectedBucketOwner(),userInfo:b("FBStoriesStore").getUserInfo(),allBucketsViewed:b("FBStoriesStore").areAllBucketsViewed(),shouldDisableReply:b("FBStoriesStore").shouldDisableReply(),currentThreadData:h,isOwnThread:c,isStoryUploading:d,isUserManagedThread:e,isUserManagedBucket:f,isGroupAdminBucket:g,threadViewers:a,allowedNavType:b("FBStoriesStore").getAllowedNavigationType(),isBucketLive:b("FBStoriesStore").isSelectedBucketLive(),isLandscape:j,isSelectedBucketLiveAndEnded:b("FBStoriesStore").isSelectedBucketLiveAndEnded(),isThreadReviewStatusPending:b("FBStoriesStore").isCurrentThreadReviewStatusPending(),viewerEntrypoint:b("FBStoriesStore").getCurrentViewerEntrypoint()};return i};a.prototype.render=function(){return b("gkx")("AT5YFMflVW0KjhIobDWpauZQcJOVbWuHN1bb9Js1JXtGLnyOS99xaxViPE6MQxuWTehQvURF-Sd83Zi2XZrO0kNs")?b("React").createElement(b("FBStoriesViewerCard.react"),babelHelpers["extends"]({},this.props,this.state,{onDeleteCurrentThread:this.$1,onMuteBucketOwner:this.$2,onNextThread:this.$3,onPrevThread:this.$4})):b("React").createElement(b("ErrorBoundary.react"),null,b("React").createElement(b("FBStoryThread.react"),babelHelpers["extends"]({},this.props,this.state,{onDeleteCurrentThread:this.$1,onMuteBucketOwner:this.$2,onReportCurrentThreadToAdmin:this.$5,onNextThread:this.$3,onPrevThread:this.$4,onTimeUpdate:this.$6})))};a.prototype.$6=function(a){b("FBStoriesActions").updateCurrentThreadPercentDone(a)};e.exports=b("FluxContainer").create(a)}),null);
__d("FBStoriesTheater.react",["cx","React","SpotlightViewerClose","FBStoryContainer.react","FBStoriesSpotlightViewer.react","Keys"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(event){event.nativeEvent.keyCode===b("Keys").RETURN&&this.props.onClose()}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("FBStoriesSpotlightViewer.react"),{onHide:this.props.onHide},b("React").createElement(b("SpotlightViewerClose"),{isFixed:!0,position:"right",onClick:this.props.onClose,onKeyPress:this.$1}),b("React").createElement("div",{className:"uiContextualLayerParent"},b("React").createElement(b("FBStoryContainer.react"),{onDone:this.props.onDone,enableNavigation:!0,isStoryMuted:this.props.isStoryMuted,onClickMute:this.props.onMute,onCloseRequested:this.props.onHide})))};e.exports=a}),null);
__d("FBStoriesLiveVideoActions",["FBStoriesDispatcher","FBStoriesLiveVideoActionTypes"],(function(a,b,c,d,e,f){"use strict";var g=b("FBStoriesDispatcher").dispatch;a={setUIComponents:function(a,c,d,e,f){g({type:b("FBStoriesLiveVideoActionTypes").SET_UI_COMPONENTS,videoID:a,uiComponents:{ufi:c,reactionsMenu:d,topSection:e,ufiScrollableArea:f}})},removeUIComponents:function(){g({type:b("FBStoriesLiveVideoActionTypes").REMOVE_UI_COMPONENTS})},loadUIComponentsFailed:function(a){g({type:b("FBStoriesLiveVideoActionTypes").LOAD_UI_COMPONENTS_FAILED,videoID:a})}};e.exports=a}),null);
__d("FBStoriesTheaterContainer.react",["FBStoriesActions","FBStoriesStore","FBStoriesTheater.react","FBStoriesLoggingHelper","FBStoriesLoggingConstants","FBStoriesLiveVideoActions","FluxContainer","UFIRootRegistry","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h={isStoryMuted:!1,currentThreadID:null,isOwnBucket:!1,selectedBucketIsLive:!1};c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=b("FBStoriesLoggingConstants").SOURCE_CLOSE_FROM_MODAL,this.state=h,this.$2=function(){b("FBStoriesLoggingHelper").storyLog(b("FBStoriesLoggingConstants").ACTION_CLOSE_STORY,this.$1),b("FBStoriesActions").toggleViewer(!1,null),this.$6()}.bind(this),this.$3=function(){this.$1=b("FBStoriesLoggingConstants").SOURCE_CLOSE_FROM_MODAL_CLOSE_BUTTON,b("FBStoriesActions").toggleViewer(!1,null)}.bind(this),this.$4=function(){this.$1=b("FBStoriesLoggingConstants").SOURCE_CLOSE_FROM_LAST_STORY_FINISHING,b("FBStoriesActions").toggleViewer(!1,null)}.bind(this),this.$5=function(){this.setState(function(a){return{isStoryMuted:!a.isStoryMuted}})}.bind(this),c}a.getStores=function(){return[b("FBStoriesStore")]};a.calculateState=function(a){return!b("FBStoriesStore").isViewerOpen()?a?a:h:{isStoryMuted:a?a.isStoryMuted:!1,currentThreadID:b("FBStoriesStore").getCurrentThreadIDForSelectedBucket(),isOwnBucket:b("FBStoriesStore").isOwnBucket(),selectedBucketIsLive:b("FBStoriesStore").isSelectedBucketLive()}};a.prototype.render=function(){return b("React").createElement(b("FBStoriesTheater.react"),{onHide:this.$2,onClose:this.$3,onDone:this.$4,onMute:this.$5,isStoryMuted:this.state.isStoryMuted})};a.prototype.$6=function(){this.state.isOwnBucket&&this.state.currentThreadID&&b("FBStoriesActions").markThreadViewersSeen(this.state.currentThreadID),b("FBStoriesActions").markCurrentThreadAsSeen(),this.state.selectedBucketIsLive&&b("FBStoriesActions").removeEndedLiveVideo(),b("FBStoriesActions").unselectBucket(),b("FBStoriesLiveVideoActions").removeUIComponents(),b("UFIRootRegistry").cleanupSnowliftNodes(),this.props.onClose()};e.exports=b("FluxContainer").create(a)}),null);
__d("FBStoriesViewer",["DOM","ReactDOM","React","FBStoriesTheaterContainer.react","Run"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="fb_stories_theater";h.getInstance=function(){this.$3||(h.$3=new h());return h.$3};function h(){this.close=function(){if(this.$1===!1)return;this.$1=!1;b("ReactDOM").unmountComponentAtNode(this.$2)}.bind(this),this.$1=!1,this.$2=b("DOM").create("div",{id:g}),document.body&&document.body.appendChild(this.$2),b("Run").onLeave(this.close)}h.prototype.toggle=function(a){a?this.open():this.close()};h.prototype.open=function(){if(this.$1)return;this.$1=!0;b("ReactDOM").render(b("React").createElement(b("FBStoriesTheaterContainer.react"),{onClose:this.close}),this.$2)};e.exports=h}),null);